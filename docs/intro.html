<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Setup | Rapid R Data Viz Book</title>
  <meta name="description" content="Description" />
  <meta name="generator" content="bookdown 0.15 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Setup | Rapid R Data Viz Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Setup | Rapid R Data Viz Book" />
  
  <meta name="twitter:description" content="Description" />
  

<meta name="author" content="Bill Cockerill" />


<meta name="date" content="2020-02-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="why-read-this.html"/>
<link rel="next" href="exploratory-data-analysis.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/trelliscopejs_widget-0.3.0/trelliscope.min.js"></script>
<script src="libs/trelliscopejs_widget-binding-0.2.1/trelliscopejs_widget.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.2/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.2/js/bootstrap.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/ionrangeslider-2.1.2/css/ion.rangeSlider.css" rel="stylesheet" />
<link href="libs/ionrangeslider-2.1.2/css/ion.rangeSlider.skinShiny.css" rel="stylesheet" />
<script src="libs/ionrangeslider-2.1.2/js/ion.rangeSlider.min.js"></script>
<script src="libs/strftime-0.9.2/strftime-min.js"></script>
<script src="libs/apexcharts-3.8.4/apexcharts.min.js"></script>
<script src="libs/apexcharter-binding-0.1.2/apexcharter.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.10/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.10.19/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.10.19/js/dataTables.fixedColumns.min.js"></script>
<link href="libs/dt-ext-buttons-1.10.19/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.10.19/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.flash.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.print.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.1/grViz.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/jquery-ui-1.11.4/jquery.ui.touch-punch.min.js"></script>
<link href="libs/c3-0.4.11/c3.min.css" rel="stylesheet" />
<script src="libs/c3-0.4.11/c3.min.js"></script>
<script src="libs/d3-3.5.5/d3.v3.min.js"></script>
<link href="libs/pivottable-2.19.0/pivot.min.css" rel="stylesheet" />
<script src="libs/pivottable-2.19.0/pivot.min.js"></script>
<script src="libs/pivottable-2.19.0/d3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/c3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.cs.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.da.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.de.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.es.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.fr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.it.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.nl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pt.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.ru.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.sq.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.tr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.zh.min.js"></script>
<link href="libs/subtotal-1.10.0/subtotal.min.css" rel="stylesheet" />
<script src="libs/subtotal-1.10.0/subtotal.min.js"></script>
<script src="libs/polyfill-0.1/polyfill.min.js"></script>
<link href="libs/rpivotTable_style-0.1/rpivotTable.css" rel="stylesheet" />
<script src="libs/rpivotTable-binding-0.3.0/rpivotTable.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Rapid R Data Viz Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> <span>tl;dr</span></a></li>
<li class="chapter" data-level="2" data-path="why-read-this.html"><a href="why-read-this.html"><i class="fa fa-check"></i><b>2</b> Why read this?</a><ul>
<li class="chapter" data-level="2.1" data-path="why-read-this.html"><a href="why-read-this.html#good-data-analysis-starts-with-fast-intuitive-eda"><i class="fa fa-check"></i><b>2.1</b> Good data analysis starts with fast &amp; intuitive EDA</a></li>
<li class="chapter" data-level="2.2" data-path="why-read-this.html"><a href="why-read-this.html#is-this-data-science"><i class="fa fa-check"></i><b>2.2</b> Is this Data Science?</a></li>
<li class="chapter" data-level="2.3" data-path="why-read-this.html"><a href="why-read-this.html#what-about-python-for-data-viz"><i class="fa fa-check"></i><b>2.3</b> What about Python for data viz?</a></li>
<li class="chapter" data-level="2.4" data-path="why-read-this.html"><a href="why-read-this.html#what-about-point-and-click-data-vis-tools"><i class="fa fa-check"></i><b>2.4</b> What about Point and Click data vis tools?</a></li>
<li class="chapter" data-level="2.5" data-path="why-read-this.html"><a href="why-read-this.html#find-an-r-master-to-inspire-you"><i class="fa fa-check"></i><b>2.5</b> Find an R master to inspire you</a><ul>
<li class="chapter" data-level="2.5.1" data-path="why-read-this.html"><a href="why-read-this.html#david-robinson"><i class="fa fa-check"></i><b>2.5.1</b> David Robinson</a></li>
<li class="chapter" data-level="2.5.2" data-path="why-read-this.html"><a href="why-read-this.html#claus-wilke"><i class="fa fa-check"></i><b>2.5.2</b> Claus Wilke</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>3</b> Setup</a><ul>
<li class="chapter" data-level="3.1" data-path="intro.html"><a href="intro.html#navigate-r-markdown-quickly"><i class="fa fa-check"></i><b>3.1</b> Navigate R markdown quickly</a></li>
<li class="chapter" data-level="3.2" data-path="intro.html"><a href="intro.html#rstudio-shortcuts"><i class="fa fa-check"></i><b>3.2</b> Rstudio shortcuts</a></li>
<li class="chapter" data-level="3.3" data-path="intro.html"><a href="intro.html#load-r-packages-to-your-library"><i class="fa fa-check"></i><b>3.3</b> Load R packages to your library</a></li>
<li class="chapter" data-level="3.4" data-path="intro.html"><a href="intro.html#the-data-to-visualise"><i class="fa fa-check"></i><b>3.4</b> The data to visualise</a></li>
<li class="chapter" data-level="3.5" data-path="intro.html"><a href="intro.html#qa-and-unit-tests"><i class="fa fa-check"></i><b>3.5</b> QA and Unit tests</a><ul>
<li class="chapter" data-level="3.5.1" data-path="intro.html"><a href="intro.html#tidylog"><i class="fa fa-check"></i><b>3.5.1</b> tidylog</a></li>
<li class="chapter" data-level="3.5.2" data-path="intro.html"><a href="intro.html#testthat"><i class="fa fa-check"></i><b>3.5.2</b> testthat</a></li>
<li class="chapter" data-level="3.5.3" data-path="intro.html"><a href="intro.html#assertr"><i class="fa fa-check"></i><b>3.5.3</b> assertr</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="intro.html"><a href="intro.html#code-style"><i class="fa fa-check"></i><b>3.6</b> Code style</a><ul>
<li class="chapter" data-level="3.6.1" data-path="intro.html"><a href="intro.html#rule-1-include-names-before-all-functions"><i class="fa fa-check"></i><b>3.6.1</b> Rule 1: Include names before all functions</a></li>
<li class="chapter" data-level="3.6.2" data-path="intro.html"><a href="intro.html#rule-2-add-argument-names-to-all-functions"><i class="fa fa-check"></i><b>3.6.2</b> Rule 2: Add argument names to all functions</a></li>
<li class="chapter" data-level="3.6.3" data-path="intro.html"><a href="intro.html#rule-3-each-line-does-one-thing"><i class="fa fa-check"></i><b>3.6.3</b> Rule 3: Each line does one thing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#start-with-dplyr-counts-and-summaries-in-console"><i class="fa fa-check"></i><b>4.1</b> Start with dplyr counts and summaries in console</a></li>
<li class="chapter" data-level="4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#plot-data-points-with-geom_point"><i class="fa fa-check"></i><b>4.2</b> Plot data points with geom_point()</a></li>
<li class="chapter" data-level="4.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#facet-by-categories"><i class="fa fa-check"></i><b>4.3</b> Facet by categories</a></li>
<li class="chapter" data-level="4.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#facet-interactively-trelliscopejs"><i class="fa fa-check"></i><b>4.4</b> Facet interactively (trelliscopejs)</a></li>
<li class="chapter" data-level="4.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#loop-to-plot-every-category-separately"><i class="fa fa-check"></i><b>4.5</b> Loop to plot every category separately</a></li>
<li class="chapter" data-level="4.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#polish-your-final-plot"><i class="fa fa-check"></i><b>4.6</b> Polish your final plot</a></li>
<li class="chapter" data-level="4.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#simplify-plot-theme-settings"><i class="fa fa-check"></i><b>4.7</b> Simplify plot theme settings</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html"><i class="fa fa-check"></i><b>5</b> Why start with geom_point() ?</a><ul>
<li class="chapter" data-level="5.1" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#ggplot-is-famed-for-annoying-errors"><i class="fa fa-check"></i><b>5.1</b> ggplot is famed for annoying errors</a></li>
<li class="chapter" data-level="5.2" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#retreat-to-geom_point"><i class="fa fa-check"></i><b>5.2</b> Retreat to geom_point()</a></li>
<li class="chapter" data-level="5.3" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#geom_jitter-and-geom_boxplot-is-better"><i class="fa fa-check"></i><b>5.3</b> geom_jitter() <strong>and</strong> geom_boxplot() is better</a></li>
<li class="chapter" data-level="5.4" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#final-choice-geom_dotplot-and-stat_summary"><i class="fa fa-check"></i><b>5.4</b> Final choice: geom_dotplot() <strong>and</strong> stat_summary()</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-plots.html"><a href="interactive-plots.html"><i class="fa fa-check"></i><b>6</b> Interactive plots</a><ul>
<li class="chapter" data-level="6.1" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-cheat-convert-ggplot-with-plotlyggplotly"><i class="fa fa-check"></i><b>6.1</b> Plotly cheat: convert ggplot with plotly::ggplotly()</a></li>
<li class="chapter" data-level="6.2" data-path="interactive-plots.html"><a href="interactive-plots.html#edit-ggplot-conversion-with-plotlyplotly_build"><i class="fa fa-check"></i><b>6.2</b> Edit ggplot conversion with plotly::plotly_build()</a></li>
<li class="chapter" data-level="6.3" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-basic"><i class="fa fa-check"></i><b>6.3</b> Plotly basic</a></li>
<li class="chapter" data-level="6.4" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-a-few-more-settings"><i class="fa fa-check"></i><b>6.4</b> plotly (a few more settings)</a></li>
<li class="chapter" data-level="6.5" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-bells-whistles"><i class="fa fa-check"></i><b>6.5</b> plotly (bells &amp; whistles)</a></li>
<li class="chapter" data-level="6.6" data-path="interactive-plots.html"><a href="interactive-plots.html#crosstalk"><i class="fa fa-check"></i><b>6.6</b> crosstalk</a></li>
<li class="chapter" data-level="6.7" data-path="interactive-plots.html"><a href="interactive-plots.html#apexcharter-basic"><i class="fa fa-check"></i><b>6.7</b> apexcharter basic</a></li>
<li class="chapter" data-level="6.8" data-path="interactive-plots.html"><a href="interactive-plots.html#apexcharter-bells-whistles"><i class="fa fa-check"></i><b>6.8</b> apexcharter (bells &amp; whistles)</a></li>
<li class="chapter" data-level="6.9" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-basic"><i class="fa fa-check"></i><b>6.9</b> dygraphs basic</a></li>
<li class="chapter" data-level="6.10" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-bells-whistles"><i class="fa fa-check"></i><b>6.10</b> dygraphs (bells &amp; whistles)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="animation.html"><a href="animation.html"><i class="fa fa-check"></i><b>7</b> Animation</a><ul>
<li class="chapter" data-level="7.1" data-path="animation.html"><a href="animation.html#ggplot-animation"><i class="fa fa-check"></i><b>7.1</b> ggplot animation</a></li>
<li class="chapter" data-level="7.2" data-path="animation.html"><a href="animation.html#plotly-animation"><i class="fa fa-check"></i><b>7.2</b> plotly animation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="process-mining.html"><a href="process-mining.html"><i class="fa fa-check"></i><b>8</b> Process Mining</a><ul>
<li class="chapter" data-level="8.1" data-path="process-mining.html"><a href="process-mining.html#what-is-process-mining"><i class="fa fa-check"></i><b>8.1</b> What is Process Mining?</a></li>
<li class="chapter" data-level="8.2" data-path="process-mining.html"><a href="process-mining.html#the-event-log"><i class="fa fa-check"></i><b>8.2</b> The event log</a><ul>
<li class="chapter" data-level="8.2.1" data-path="process-mining.html"><a href="process-mining.html#understanding-the-event-log"><i class="fa fa-check"></i><b>8.2.1</b> Understanding the event log</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="process-mining.html"><a href="process-mining.html#visualise-the-event-log"><i class="fa fa-check"></i><b>8.3</b> Visualise the event log</a><ul>
<li class="chapter" data-level="8.3.1" data-path="process-mining.html"><a href="process-mining.html#process-map"><i class="fa fa-check"></i><b>8.3.1</b> Process map</a></li>
<li class="chapter" data-level="8.3.2" data-path="process-mining.html"><a href="process-mining.html#trace-explorer"><i class="fa fa-check"></i><b>8.3.2</b> Trace explorer</a></li>
<li class="chapter" data-level="8.3.3" data-path="process-mining.html"><a href="process-mining.html#conformance-checking"><i class="fa fa-check"></i><b>8.3.3</b> Conformance checking</a></li>
<li class="chapter" data-level="8.3.4" data-path="process-mining.html"><a href="process-mining.html#dotted-chart"><i class="fa fa-check"></i><b>8.3.4</b> Dotted chart</a></li>
<li class="chapter" data-level="8.3.5" data-path="process-mining.html"><a href="process-mining.html#resource-exploration"><i class="fa fa-check"></i><b>8.3.5</b> Resource exploration</a></li>
<li class="chapter" data-level="8.3.6" data-path="process-mining.html"><a href="process-mining.html#filter-interactively-within-rstudio"><i class="fa fa-check"></i><b>8.3.6</b> Filter interactively within RStudio</a></li>
<li class="chapter" data-level="8.3.7" data-path="process-mining.html"><a href="process-mining.html#bespoke-exploration"><i class="fa fa-check"></i><b>8.3.7</b> Bespoke exploration</a></li>
<li class="chapter" data-level="8.3.8" data-path="process-mining.html"><a href="process-mining.html#creating-your-own-event-log"><i class="fa fa-check"></i><b>8.3.8</b> Creating your own event log</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="process-mining.html"><a href="process-mining.html#can-we-predict-the-age-of-a-case"><i class="fa fa-check"></i><b>8.4</b> Can we predict the age of a case?</a></li>
<li class="chapter" data-level="8.5" data-path="process-mining.html"><a href="process-mining.html#process-discovery-algorithms"><i class="fa fa-check"></i><b>8.5</b> Process Discovery algorithms</a><ul>
<li class="chapter" data-level="8.5.1" data-path="process-mining.html"><a href="process-mining.html#flexible-heuristics-miner"><i class="fa fa-check"></i><b>8.5.1</b> Flexible Heuristics Miner</a></li>
<li class="chapter" data-level="8.5.2" data-path="process-mining.html"><a href="process-mining.html#fuzzy-miner"><i class="fa fa-check"></i><b>8.5.2</b> Fuzzy miner</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>9</b> Tables</a><ul>
<li class="chapter" data-level="9.1" data-path="tables.html"><a href="tables.html#datatable-basic"><i class="fa fa-check"></i><b>9.1</b> DataTable basic</a></li>
<li class="chapter" data-level="9.2" data-path="tables.html"><a href="tables.html#datatable-bells-whistles"><i class="fa fa-check"></i><b>9.2</b> DataTable (bells &amp; whistles)</a></li>
<li class="chapter" data-level="9.3" data-path="tables.html"><a href="tables.html#colour-datatable-with-formattable"><i class="fa fa-check"></i><b>9.3</b> Colour DataTable with formattable</a></li>
<li class="chapter" data-level="9.4" data-path="tables.html"><a href="tables.html#rpivottable-basic"><i class="fa fa-check"></i><b>9.4</b> rpivottable basic</a></li>
<li class="chapter" data-level="9.5" data-path="tables.html"><a href="tables.html#rpivottable-bells-whistles"><i class="fa fa-check"></i><b>9.5</b> rpivottable (bells &amp; whistles)</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="colours.html"><a href="colours.html"><i class="fa fa-check"></i><b>10</b> Colours</a><ul>
<li class="chapter" data-level="10.1" data-path="colours.html"><a href="colours.html#rcolorbrewer"><i class="fa fa-check"></i><b>10.1</b> RColorBrewer</a></li>
<li class="chapter" data-level="10.2" data-path="colours.html"><a href="colours.html#prismatic"><i class="fa fa-check"></i><b>10.2</b> Prismatic</a></li>
<li class="chapter" data-level="10.3" data-path="colours.html"><a href="colours.html#hand-picked-colours"><i class="fa fa-check"></i><b>10.3</b> Hand-picked colours</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="final-document.html"><a href="final-document.html"><i class="fa fa-check"></i><b>11</b> Final document</a><ul>
<li class="chapter" data-level="11.1" data-path="final-document.html"><a href="final-document.html#picking-a-final-output-doc"><i class="fa fa-check"></i><b>11.1</b> Picking a final output doc</a></li>
<li class="chapter" data-level="11.2" data-path="final-document.html"><a href="final-document.html#flexdashboard-vs-shiny"><i class="fa fa-check"></i><b>11.2</b> flexdashboard (vs Shiny)</a></li>
<li class="chapter" data-level="11.3" data-path="final-document.html"><a href="final-document.html#r-markdown-with-floating-contents-and-tabbed-sections"><i class="fa fa-check"></i><b>11.3</b> R markdown with floating contents and tabbed sections</a></li>
<li class="chapter" data-level="11.4" data-path="final-document.html"><a href="final-document.html#bookdown"><i class="fa fa-check"></i><b>11.4</b> bookdown</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rapid R Data Viz Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Setup</h1>
<div id="navigate-r-markdown-quickly" class="section level2">
<h2><span class="header-section-number">3.1</span> Navigate R markdown quickly</h2>
<ul>
<li>To quickly find part of your code to edit, instead of scrolling up and down the <a href="https://bookdown.org/yihui/rmarkdown/">R Markdown</a> code, jump instantly to the right section by using the document outline. You can show the outline in one of three ways:</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Hold down <code>Ctrl+Shift+O</code>.</p></li>
<li><p>Click the top-right icon in the code pane.</p></li>
<li><p>Left-click on the bottom bar of the R markdown file.</p></li>
</ol>
<p>The gif below shows these three methods. It’s recorded with <a href="https://www.screentogif.com/">ScreenToGif</a>. I donated to the author as I found it so easy to use as well as providing lots of genuinely useful features - for example, a gif progress bar and the ability to pixelate out sections of the recording.</p>
<p><img src="outline.gif" width="100%" /></p>
</div>
<div id="rstudio-shortcuts" class="section level2">
<h2><span class="header-section-number">3.2</span> Rstudio shortcuts</h2>
<ul>
<li><p>Another tip to speed up coding in RStudio is to use keyboard shortcuts. Here is the full list of <a href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">RStudio shorcuts</a>.</p></li>
<li><p>I use <code>Ctrl+Shift+M</code> in Windows (<code>Cmd+Shift+M</code> in Mac) to insert a pipe <code>%&gt;%</code> with spaces which makes tidyverse coding fast.</p></li>
<li><p>I also use <code>Alt+-</code> in Windows (<code>Option+-</code> in Mac) to create the assign operator <code>&lt;-</code>.</p></li>
</ul>
</div>
<div id="load-r-packages-to-your-library" class="section level2">
<h2><span class="header-section-number">3.3</span> Load R packages to your library</h2>
<p>Here are all the R packages used in this book.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># data vis https://www.htmlwidgets.org/index.html</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(ggplot2) <span class="co"># static charts - amazing variety</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(plotly) <span class="co"># interactive charts</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">library</span>(apexcharter) <span class="co"># much like the paid for highchater js library. Powerful</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(trelliscopejs) <span class="co">#  small multiples</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">library</span>(dygraphs) <span class="co"># awesome interactive timeseries</span></a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co"># ggplot extensions https://www.ggplot2-exts.org/gallery/</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">library</span>(scales) <span class="co"># improve your scales</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw">library</span>(gganimate) <span class="co"># animate your ggplot</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw">library</span>(png) <span class="co"># </span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">library</span>(directlabels) <span class="co"># for directly labelling lines for example</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">library</span>(gghighlight) <span class="co"># label points of interest on your charts</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">library</span>(ggrepel) <span class="co"># move labels so they don&#39;t overlap</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">library</span>(glue) <span class="co"># include column names in a looping chart title</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="kw">library</span>(crosstalk) <span class="co"># link html widgets like plotly to DT tables</span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="kw">library</span>(skimr) <span class="co"># quickly skim the characteristics of a data frame</span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="kw">library</span>(cowplot) <span class="co"># </span></a>
<a class="sourceLine" id="cb1-19" title="19"></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co"># colours</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="kw">library</span>(RColorBrewer) <span class="co"># ready to use colour pallets</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="kw">library</span>(prismatic) <span class="co"># palettes and ways to tweak an entire pallete</span></a>
<a class="sourceLine" id="cb1-23" title="23"></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co"># tables</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="kw">library</span>(kableExtra) <span class="co"># attractive static tables</span></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="kw">library</span>(formattable) <span class="co"># colour tables. Like Excel&#39;s conditional formattinng</span></a>
<a class="sourceLine" id="cb1-27" title="27"><span class="kw">library</span>(rpivotTable) <span class="co"># like Excel&#39;s pivot table</span></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="kw">library</span>(DT) <span class="co"># awesome interactive tables</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="kw">library</span>(reactable)</a>
<a class="sourceLine" id="cb1-30" title="30"></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co"># Quality Assurance</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="kw">library</span>(tidylog) <span class="co"># great for QA on the fly </span></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="kw">library</span>(testthat) <span class="co"># for writing unit tests</span></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="kw">library</span>(assertr) <span class="co"># for writing tests verify assumptions about data early in the data pipeline of manipulation</span></a>
<a class="sourceLine" id="cb1-35" title="35"></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="co"># wrangling / munging / manipulating</span></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="kw">library</span>(tidyverse) <span class="co"># loads of useful packages in one </span></a>
<a class="sourceLine" id="cb1-38" title="38"></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="co"># time series tools</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="kw">library</span>(anytime) <span class="co"># convert text into the right date type</span></a>
<a class="sourceLine" id="cb1-41" title="41"><span class="kw">library</span>(tsbox) <span class="co"># convert to time series for dygraphs</span></a>
<a class="sourceLine" id="cb1-42" title="42"></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="co"># sample data</span></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="kw">library</span>(mosaicData) <span class="co"># sample data</span></a>
<a class="sourceLine" id="cb1-45" title="45"><span class="kw">library</span>(eventdataR) <span class="co"># sample process mining data sets</span></a>
<a class="sourceLine" id="cb1-46" title="46"></a>
<a class="sourceLine" id="cb1-47" title="47"><span class="co"># Processing mining</span></a>
<a class="sourceLine" id="cb1-48" title="48"><span class="kw">library</span>(bupaR) <span class="co"># the process mining package that converts your data into an event log</span></a>
<a class="sourceLine" id="cb1-49" title="49"><span class="kw">library</span>(edeaR) <span class="co"># good for filtering and subsetting a process event log</span></a>
<a class="sourceLine" id="cb1-50" title="50"><span class="kw">library</span>(processmapR) <span class="co"># convert an event log into a visual process map</span></a>
<a class="sourceLine" id="cb1-51" title="51"><span class="kw">library</span>(processanimateR) <span class="co"># animate a process map</span></a>
<a class="sourceLine" id="cb1-52" title="52"><span class="kw">library</span>(processcheckR) <span class="co"># carry out conformance checking (i.e. a process follows certain rules)</span></a>
<a class="sourceLine" id="cb1-53" title="53"><span class="kw">library</span>(heuristicsmineR) <span class="co"># Process discovery algorithm</span></a>
<a class="sourceLine" id="cb1-54" title="54"><span class="kw">library</span>(fuzzymineR) <span class="co"># Process discovery algorithm</span></a></code></pre></div>
</div>
<div id="the-data-to-visualise" class="section level2">
<h2><span class="header-section-number">3.4</span> The data to visualise</h2>
<ul>
<li><p>Often in EDA and data visualisation, we are most interested in how values change over time. For example, are things getting worse, better, higher, lower? For this reason, instead of using a <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/00Index.html">built in data set</a> like iris or mtcars we mostly use the <a href="http://vincentarelbundock.github.io/Rdatasets/doc/ggplot2/txhousing.html">Texas housing sales</a> data in this book. This is a time-series data set built into ggplot.</p></li>
<li><p>To improve your skills I recommend finding other open data sets to develop your data vis skills. I found the marriage data we look at later in this <a href="https://vincentarelbundock.github.io/Rdatasets/">comprehensive list of R datasets</a>. The <a href="https://github.com/rfordatascience/tidytuesday">Tidy Tuesday</a> data sets are also a great source of data sets. You also get to learn from seeing how others (including David Robinson) have tackled them.</p></li>
<li><p>You could also look for data stories that interest you or that you could improve and explore further. I recently saw a data visualisation in The Times newspaper on <a href="https://github.com/billster45/improve_a_data_viz/blob/master/README.md">smoking and vaping</a> that I tried to improve.</p></li>
<li><p>The only manipulation we will do to the Texas housing sales data below is to create a real date using <a href="https://lubridate.tidyverse.org/">lubridate</a>. This book doesn’t cover the data manipulation part of EDA. A good guide is the <a href="https://bookdown.org/rdpeng/exdata/managing-data-frames-with-the-dplyr-package.html">Managing Data Frames with the <code>dplyr</code> package</a> chapter in Roger Peng’s <a href="https://bookdown.org/rdpeng/exdata/">Exploratory Data Analysis with R</a>. As well as the resources described in bullet 1 <a href="https://github.com/billster45/r-guides-and-galleries#learn-to-analyse-data-with-r">here</a>.</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># create a data frame with a real date for plotting</span></a>
<a class="sourceLine" id="cb2-2" title="2">df &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>txhousing <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">make_date</span>(<span class="dt">year =</span> year,</a>
<a class="sourceLine" id="cb2-4" title="4">                                              <span class="dt">month =</span> month, </a>
<a class="sourceLine" id="cb2-5" title="5">                                              <span class="dt">day =</span><span class="dv">1</span>)) </a></code></pre></div>
<ul>
<li>Here are the top few rows of the data frame we created using a simple kableExtra table. The <a href="tables.html#tables">Tables</a> chapter later on in this book describes different table methods in more detail.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">kableExtra<span class="op">::</span><span class="kw">kable</span>(utils<span class="op">::</span><span class="kw">head</span>(df))</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
city
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
month
</th>
<th style="text-align:right;">
sales
</th>
<th style="text-align:right;">
volume
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
listings
</th>
<th style="text-align:right;">
inventory
</th>
<th style="text-align:left;">
date
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
5380000
</td>
<td style="text-align:right;">
71400
</td>
<td style="text-align:right;">
701
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:left;">
2000-01-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
6505000
</td>
<td style="text-align:right;">
58700
</td>
<td style="text-align:right;">
746
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:left;">
2000-02-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
130
</td>
<td style="text-align:right;">
9285000
</td>
<td style="text-align:right;">
58100
</td>
<td style="text-align:right;">
784
</td>
<td style="text-align:right;">
6.8
</td>
<td style="text-align:left;">
2000-03-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
9730000
</td>
<td style="text-align:right;">
68600
</td>
<td style="text-align:right;">
785
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:left;">
2000-04-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
10590000
</td>
<td style="text-align:right;">
67300
</td>
<td style="text-align:right;">
794
</td>
<td style="text-align:right;">
6.8
</td>
<td style="text-align:left;">
2000-05-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
13910000
</td>
<td style="text-align:right;">
66900
</td>
<td style="text-align:right;">
780
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:left;">
2000-06-01
</td>
</tr>
</tbody>
</table>
</div>
<div id="qa-and-unit-tests" class="section level2">
<h2><span class="header-section-number">3.5</span> QA and Unit tests</h2>
<div id="tidylog" class="section level3">
<h3><span class="header-section-number">3.5.1</span> tidylog</h3>
<ul>
<li>We’ll also use <a href="https://github.com/elbersb/tidylog/blob/master/README.md">tidylog</a> with dplyr. Tidylog is an easy way to include fast basic Quality Assurance during dplyr data manipulation. Just replace the dplyr verbs with the same verb in tidylog. Tidylog tells you what each dplyr verb has done to your data. For example, how many rows <code>dplyr::filter()</code> drops or adds, or what percentage of values <code>dplyr::mutate()</code> has changed.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># create a data frame with a real date for plotting</span></a>
<a class="sourceLine" id="cb4-2" title="2">df &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>txhousing <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">make_date</span>(<span class="dt">year =</span> year,</a>
<a class="sourceLine" id="cb4-4" title="4">                                              <span class="dt">month =</span> month, </a>
<a class="sourceLine" id="cb4-5" title="5">                                              <span class="dt">day =</span><span class="dv">1</span>)) </a></code></pre></div>
<pre><code>## mutate: changed 8,602 values (100%) of &#39;date&#39; (0 new NA)</code></pre>
<ul>
<li><p>The tidylog message above tells us that the mutate has changed <code>(100%) of 'date' (0 new NA)</code>. This is what we would expect to happen.</p></li>
<li><p>Let’s also create a data frame with fewer cities so that some plots created later will be less crowded. Below we select only cities where the maximum number of sales in any month is more than 500.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># reduce the number of cities for simpler plots</span></a>
<a class="sourceLine" id="cb6-2" title="2">df_red &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">sales_max =</span> base<span class="op">::</span><span class="kw">max</span>(sales)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">filter</span>(sales_max <span class="op">&gt;=</span><span class="st"> </span><span class="dv">500</span>)</a></code></pre></div>
<pre><code>## mutate (grouped): new variable &#39;sales_max&#39; with 27 unique values and 43% NA</code></pre>
<pre><code>## filter: removed 6,171 rows (72%), 2,431 rows remaining</code></pre>
<ul>
<li>Hold on. Look! Read the tidylog message above. It says <code>new variable 'sales_max' with 27 unique values and 43% NA</code>. As we filter the rows in the next line of code by <code>sales_max</code> we don’t want any of the values to be NA. Well spotted tidylog. We correct it below by removing NAs from <code>salses_max</code> by adding <code>na.rm = TRUE</code> inside the <code>base:max()</code> function.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co"># reduce the number of cities for simpler plots</span></a>
<a class="sourceLine" id="cb9-2" title="2">df_red &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">sales_max =</span> base<span class="op">::</span><span class="kw">max</span>(sales, </a>
<a class="sourceLine" id="cb9-5" title="5">                                        <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">filter</span>(sales_max <span class="op">&gt;=</span><span class="st"> </span><span class="dv">500</span>)</a></code></pre></div>
<pre><code>## mutate (grouped): new variable &#39;sales_max&#39; with 45 unique values and 0% NA</code></pre>
<pre><code>## filter: removed 5,984 rows (70%), 2,618 rows remaining</code></pre>
<ul>
<li>The tidylog message above now tells us that the new variable <code>sales_max</code> has <code>0% NA</code> as we would expect.</li>
</ul>
</div>
<div id="testthat" class="section level3">
<h3><span class="header-section-number">3.5.2</span> testthat</h3>
<ul>
<li><p>Unit testing is mostly used during the creation of <a href="http://r-pkgs.had.co.nz/">R packages</a>. It can also be part of your analysis code. Particularly if your work is high impact and you need to be confident the results are still valid in the future. For example, you are running new data through your code or when you have added new logic. Unit tests are an automatic way to highlight errors new data or new logic has introduced you may not have spotted.</p></li>
<li><p>Hadley Wickham provides some useful <a href="https://r-pkgs.org/tests.html#what-to-test">“what to test”</a> rules of thumb for when to use <a href="https://r-pkgs.org/tests.html">unit tests</a> in his <a href="http://r-pkgs.had.co.nz/">R packages book</a>:</p></li>
</ul>
<blockquote>
<p>Strive to test each behaviour in one and only one test. Then if that behaviour later changes you only need to update a single test.</p>
</blockquote>
<blockquote>
<p>Avoid testing simple code that you’re confident will work. Instead focus your time on code that you’re not sure about, is fragile, or has complicated interdependencies. That said, I often find I make the most mistakes when I falsely assume that the problem is simple and doesn’t need any tests.</p>
</blockquote>
<blockquote>
<p>Always write a test when you discover a bug. You may find it helpful to adopt the test-first philosophy. There you always start by writing the tests, and then write the code that makes them pass. This reflects an important problem solving strategy: start by establishing your success criteria, how you know if you’ve solved the problem.</p>
</blockquote>
<ul>
<li><p>In this unit test we’re immediately going to break Hadley’s second rule above and write a test on the simple code that created our dataframe <code>df</code>. The unit tests are all adapted from an <a href="https://katherinemwood.github.io/post/testthat/">excellent introductory blog</a> on unit tests. The code has been altered to follow the three <a href="intro.html#code-style">Code style</a> rules described in the next chapter to make these examples easier to read and understand.</p></li>
<li><p>First, let’s test if the dimensions of <code>df</code> are as we expect with 9 columns and 8,602 rows.</p></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">testthat<span class="op">::</span><span class="kw">test_that</span>(<span class="st">&quot;data dimensions correct&quot;</span>, {</a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3">    testthat<span class="op">::</span><span class="kw">expect_equal</span>(</a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="dt">object =</span> base<span class="op">::</span><span class="kw">ncol</span>(df),</a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="dt">expected =</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb12-6" title="6">  )</a>
<a class="sourceLine" id="cb12-7" title="7"></a>
<a class="sourceLine" id="cb12-8" title="8">  testthat<span class="op">::</span><span class="kw">expect_equal</span>(</a>
<a class="sourceLine" id="cb12-9" title="9">    <span class="dt">object =</span> base<span class="op">::</span><span class="kw">nrow</span>(df),</a>
<a class="sourceLine" id="cb12-10" title="10">    <span class="dt">expected =</span> <span class="dv">8602</span></a>
<a class="sourceLine" id="cb12-11" title="11">  )</a>
<a class="sourceLine" id="cb12-12" title="12">})</a></code></pre></div>
<ul>
<li>This <code>testthat::test_that()</code> test does not return a message, so we know <code>df</code> has passed because the dimensions are as we expect. Let’s now test data types.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">testthat<span class="op">::</span><span class="kw">test_that</span>(<span class="st">&#39;data types correct&#39;</span>, {</a>
<a class="sourceLine" id="cb13-2" title="2">  </a>
<a class="sourceLine" id="cb13-3" title="3">  testthat<span class="op">::</span><span class="kw">expect_is</span>(<span class="dt">object =</span> df,</a>
<a class="sourceLine" id="cb13-4" title="4">                      <span class="dt">class =</span> <span class="st">&#39;data.frame&#39;</span>)</a>
<a class="sourceLine" id="cb13-5" title="5">  </a>
<a class="sourceLine" id="cb13-6" title="6">  testthat<span class="op">::</span><span class="kw">expect_is</span>(<span class="dt">object =</span> df<span class="op">$</span>date, </a>
<a class="sourceLine" id="cb13-7" title="7">                      <span class="dt">class =</span> <span class="st">&#39;Date&#39;</span>)</a>
<a class="sourceLine" id="cb13-8" title="8">})</a></code></pre></div>
<ul>
<li>Again, this test no messages so <code>df</code> has passed this test. Finally, let’s run a test we know will fail to see what failure message returns.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">testthat<span class="op">::</span><span class="kw">test_that</span>(<span class="st">&quot;no missing values&quot;</span>, {</a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3">    testthat<span class="op">::</span><span class="kw">expect_identical</span>(</a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="dt">object =</span> df,</a>
<a class="sourceLine" id="cb14-5" title="5">    <span class="dt">expected =</span> stats<span class="op">::</span><span class="kw">na.omit</span>(df)</a>
<a class="sourceLine" id="cb14-6" title="6">  )</a>
<a class="sourceLine" id="cb14-7" title="7">})</a></code></pre></div>
<pre><code>## Error: Test failed: &#39;no missing values&#39;
## * &lt;text&gt;:3: `df` not identical to stats::na.omit(df).
## Different number of rows</code></pre>
<ul>
<li>The code above tests if the original <code>df</code> object is identical to the <code>expected</code> object after omitting rows with NA values (using <code>stats::na.omit()</code>). The testthat message tells us the object and the expectation have a <code>Different number of rows</code>. We can now investigate this test failure by eye-balling some rows of <code>df</code> where any of the columns contain a missing value. Then decide if this is what we would expect from this data source.</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter_all</span>(dplyr<span class="op">::</span><span class="kw">any_vars</span>(base<span class="op">::</span><span class="kw">is.na</span>(.))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="st">  </span>utils<span class="op">::</span><span class="kw">head</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
city
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
month
</th>
<th style="text-align:right;">
sales
</th>
<th style="text-align:right;">
volume
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
listings
</th>
<th style="text-align:right;">
inventory
</th>
<th style="text-align:left;">
date
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2006
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
155
</td>
<td style="text-align:right;">
18030000
</td>
<td style="text-align:right;">
105400
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
2006-03-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Amarillo
</td>
<td style="text-align:right;">
2005
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
7225000
</td>
<td style="text-align:right;">
87000
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
2005-10-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Amarillo
</td>
<td style="text-align:right;">
2006
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
345
</td>
<td style="text-align:right;">
46755000
</td>
<td style="text-align:right;">
120700
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
2006-06-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Amarillo
</td>
<td style="text-align:right;">
2006
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
288
</td>
<td style="text-align:right;">
37365000
</td>
<td style="text-align:right;">
114100
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
2006-09-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Amarillo
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
253
</td>
<td style="text-align:right;">
32910000
</td>
<td style="text-align:right;">
114800
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
2007-11-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Amarillo
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
333
</td>
<td style="text-align:right;">
45797490
</td>
<td style="text-align:right;">
122100
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
2010-05-01
</td>
</tr>
</tbody>
</table>
</div>
<div id="assertr" class="section level3">
<h3><span class="header-section-number">3.5.3</span> assertr</h3>
<ul>
<li><p>You can also run tests <a href="https://www.datacamp.com/community/tutorials/pipe-r-tutorial#intro">piped</a> directly within your data manipulation code using <a href="https://docs.ropensci.org/assertr/">assertr</a>. This <a href="https://cran.r-project.org/web/packages/assertr/vignettes/assertr.html">assertr vignette</a> has good examples on built-in data, as well as the assert section at the bottom of this <a href="https://sharla.party/post/new-data-strategies/">good blog</a>.</p></li>
<li><p>Below we purposely ensure the assertr tests will fail all the tests so we can read the useful error output it can create.</p></li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">df <span class="op">%&gt;%</span><span class="st">   </span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">chain_start</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">verify</span>(base<span class="op">::</span><span class="kw">nrow</span>(.) <span class="op">==</span><span class="st"> </span><span class="dv">8601</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">verify</span>(base<span class="op">::</span><span class="kw">ncol</span>(.) <span class="op">==</span><span class="dv">8</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">in_set</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">11</span>), </a>
<a class="sourceLine" id="cb17-6" title="6">                  month) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">in_set</span>(<span class="dv">2000</span><span class="op">:</span><span class="dv">2014</span>), </a>
<a class="sourceLine" id="cb17-8" title="8">                  year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">within_bounds</span>(<span class="dt">lower.bound =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb17-10" title="10">                                <span class="dt">upper.bound =</span> <span class="ot">Inf</span>, </a>
<a class="sourceLine" id="cb17-11" title="11">                                <span class="dt">include.lower=</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb17-12" title="12">                                <span class="dt">allow.na =</span> <span class="ot">TRUE</span>), <span class="op">-</span>city,<span class="op">-</span>date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">insist</span>(<span class="kw">within_n_sds</span>(<span class="dv">3</span>), </a>
<a class="sourceLine" id="cb17-14" title="14">                  sales<span class="op">:</span>inventory,) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(not_na, dplyr<span class="op">::</span><span class="kw">everything</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">chain_end</span>(<span class="dt">error_fun =</span> error_stop)</a></code></pre></div>
<pre><code>## verification [base::nrow(.) == 8601] failed! (1 failure)
## 
##     verb redux_fn             predicate column index value
## 1 verify       NA base::nrow(.) == 8601     NA     1    NA
## 
## verification [base::ncol(.) == 8] failed! (1 failure)
## 
##     verb redux_fn          predicate column index value
## 1 verify       NA base::ncol(.) == 8     NA     1    NA
## 
## Column &#39;month&#39; violates assertion &#39;in_set(1:11)&#39; 690 times
##     verb redux_fn    predicate column index value
## 1 assert       NA in_set(1:11)  month    12    12
## 2 assert       NA in_set(1:11)  month    24    12
## 3 assert       NA in_set(1:11)  month    36    12
## 4 assert       NA in_set(1:11)  month    48    12
## 5 assert       NA in_set(1:11)  month    60    12
##   [omitted 685 rows]
## 
## 
## Column &#39;year&#39; violates assertion &#39;in_set(2000:2014)&#39; 322 times
##     verb redux_fn         predicate column index value
## 1 assert       NA in_set(2000:2014)   year   181  2015
## 2 assert       NA in_set(2000:2014)   year   182  2015
## 3 assert       NA in_set(2000:2014)   year   183  2015
## 4 assert       NA in_set(2000:2014)   year   184  2015
## 5 assert       NA in_set(2000:2014)   year   185  2015
##   [omitted 317 rows]
## 
## 
## Column &#39;sales&#39; violates assertion &#39;within_n_sds(3)&#39; 288 times
##     verb redux_fn       predicate column index value
## 1 insist       NA within_n_sds(3)  sales  2060  4244
## 2 insist       NA within_n_sds(3)  sales  2061  3977
## 3 insist       NA within_n_sds(3)  sales  2062  4545
## 4 insist       NA within_n_sds(3)  sales  2063  4738
## 5 insist       NA within_n_sds(3)  sales  2064  4276
##   [omitted 283 rows]
## 
## 
## Column &#39;volume&#39; violates assertion &#39;within_n_sds(3)&#39; 254 times
##     verb redux_fn       predicate column index      value
## 1 insist       NA within_n_sds(3) volume   722  944924177
## 2 insist       NA within_n_sds(3) volume   723  880058970
## 3 insist       NA within_n_sds(3) volume   724  993168216
## 4 insist       NA within_n_sds(3) volume   725  931481472
## 5 insist       NA within_n_sds(3) volume   734 1012123948
##   [omitted 249 rows]
## 
## 
## Column &#39;median&#39; violates assertion &#39;within_n_sds(3)&#39; 89 times
##     verb redux_fn       predicate column index  value
## 1 insist       NA within_n_sds(3) median   734 243900
## 2 insist       NA within_n_sds(3) median   735 248900
## 3 insist       NA within_n_sds(3) median   736 246900
## 4 insist       NA within_n_sds(3) median   737 243800
## 5 insist       NA within_n_sds(3) median   740 242100
##   [omitted 84 rows]
## 
## 
## Column &#39;listings&#39; violates assertion &#39;within_n_sds(3)&#39; 255 times
##     verb redux_fn       predicate   column index value
## 1 insist       NA within_n_sds(3) listings  2086 21153
## 2 insist       NA within_n_sds(3) listings  2087 22043
## 3 insist       NA within_n_sds(3) listings  2088 23165
## 4 insist       NA within_n_sds(3) listings  2089 23056
## 5 insist       NA within_n_sds(3) listings  2090 23551
##   [omitted 250 rows]
## 
## 
## Column &#39;inventory&#39; violates assertion &#39;within_n_sds(3)&#39; 187 times
##     verb redux_fn       predicate    column index value
## 1 insist       NA within_n_sds(3) inventory  3108  21.9
## 2 insist       NA within_n_sds(3) inventory  3109  23.2
## 3 insist       NA within_n_sds(3) inventory  3115  22.8
## 4 insist       NA within_n_sds(3) inventory  3118  21.9
## 5 insist       NA within_n_sds(3) inventory  3119  22.0
##   [omitted 182 rows]
## 
## 
## Column &#39;sales&#39; violates assertion &#39;not_na&#39; 568 times
##     verb redux_fn predicate column index value
## 1 assert       NA    not_na  sales  1144    NA
## 2 assert       NA    not_na  sales  1159    NA
## 3 assert       NA    not_na  sales  1160    NA
## 4 assert       NA    not_na  sales  1161    NA
## 5 assert       NA    not_na  sales  1162    NA
##   [omitted 563 rows]
## 
## 
## Column &#39;volume&#39; violates assertion &#39;not_na&#39; 568 times
##     verb redux_fn predicate column index value
## 1 assert       NA    not_na volume  1144    NA
## 2 assert       NA    not_na volume  1159    NA
## 3 assert       NA    not_na volume  1160    NA
## 4 assert       NA    not_na volume  1161    NA
## 5 assert       NA    not_na volume  1162    NA
##   [omitted 563 rows]
## 
## 
## Column &#39;median&#39; violates assertion &#39;not_na&#39; 616 times
##     verb redux_fn predicate column index value
## 1 assert       NA    not_na median  1144    NA
## 2 assert       NA    not_na median  1159    NA
## 3 assert       NA    not_na median  1160    NA
## 4 assert       NA    not_na median  1161    NA
## 5 assert       NA    not_na median  1162    NA
##   [omitted 611 rows]
## 
## 
## Column &#39;listings&#39; violates assertion &#39;not_na&#39; 1424 times
##     verb redux_fn predicate   column index value
## 1 assert       NA    not_na listings    75    NA
## 2 assert       NA    not_na listings   257    NA
## 3 assert       NA    not_na listings   265    NA
## 4 assert       NA    not_na listings   268    NA
## 5 assert       NA    not_na listings   282    NA
##   [omitted 1419 rows]
## 
## 
## Column &#39;inventory&#39; violates assertion &#39;not_na&#39; 1467 times
##     verb redux_fn predicate    column index value
## 1 assert       NA    not_na inventory    75    NA
## 2 assert       NA    not_na inventory   257    NA
## 3 assert       NA    not_na inventory   265    NA
## 4 assert       NA    not_na inventory   268    NA
## 5 assert       NA    not_na inventory   282    NA
##   [omitted 1462 rows]</code></pre>
<pre><code>## Error: assertr stopped execution</code></pre>
<ul>
<li>Then we adjust all of the tests so that they pass.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">df <span class="op">%&gt;%</span><span class="st">   </span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">chain_start</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">verify</span>(base<span class="op">::</span><span class="kw">nrow</span>(.) <span class="op">==</span><span class="st"> </span><span class="dv">8602</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">verify</span>(base<span class="op">::</span><span class="kw">ncol</span>(.) <span class="op">==</span><span class="dv">9</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">in_set</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>), </a>
<a class="sourceLine" id="cb20-6" title="6">                  month) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">in_set</span>(<span class="dv">2000</span><span class="op">:</span><span class="dv">2015</span>), </a>
<a class="sourceLine" id="cb20-8" title="8">                  year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">within_bounds</span>(<span class="dt">lower.bound =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb20-10" title="10">                                <span class="dt">upper.bound =</span> <span class="ot">Inf</span>, </a>
<a class="sourceLine" id="cb20-11" title="11">                                <span class="dt">include.lower=</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb20-12" title="12">                                <span class="dt">allow.na =</span> <span class="ot">TRUE</span>), <span class="op">-</span>city,<span class="op">-</span>date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-13" title="13"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">insist</span>(<span class="kw">within_n_sds</span>(<span class="dv">11</span>), </a>
<a class="sourceLine" id="cb20-14" title="14">                  sales<span class="op">:</span>inventory,) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="st">  </span><span class="co">#assertr::assert(not_na, dplyr::everything()) %&gt;% </span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">chain_end</span>(<span class="dt">error_fun =</span> error_stop) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="st">  </span>utils<span class="op">::</span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##   city     year month sales   volume median listings inventory date      
##   &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;date&gt;    
## 1 Abilene  2000     1    72  5380000  71400      701       6.3 2000-01-01
## 2 Abilene  2000     2    98  6505000  58700      746       6.6 2000-02-01
## 3 Abilene  2000     3   130  9285000  58100      784       6.8 2000-03-01
## 4 Abilene  2000     4    98  9730000  68600      785       6.9 2000-04-01
## 5 Abilene  2000     5   141 10590000  67300      794       6.8 2000-05-01
## 6 Abilene  2000     6   156 13910000  66900      780       6.6 2000-06-01</code></pre>
<ul>
<li>The code above returns the data frame which means assertr code could be part of your data preparation code when <code>df</code> was created.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">df &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>txhousing <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">make_date</span>(<span class="dt">year =</span> year,</a>
<a class="sourceLine" id="cb22-3" title="3">                                              <span class="dt">month =</span> month, </a>
<a class="sourceLine" id="cb22-4" title="4">                                              <span class="dt">day =</span><span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">chain_start</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">verify</span>(base<span class="op">::</span><span class="kw">nrow</span>(.) <span class="op">==</span><span class="st"> </span><span class="dv">8602</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">verify</span>(base<span class="op">::</span><span class="kw">ncol</span>(.) <span class="op">==</span><span class="dv">9</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">in_set</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>), </a>
<a class="sourceLine" id="cb22-9" title="9">                  month) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-10" title="10"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">in_set</span>(<span class="dv">2000</span><span class="op">:</span><span class="dv">2015</span>), </a>
<a class="sourceLine" id="cb22-11" title="11">                  year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-12" title="12"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(<span class="kw">within_bounds</span>(<span class="dt">lower.bound =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb22-13" title="13">                                <span class="dt">upper.bound =</span> <span class="ot">Inf</span>, </a>
<a class="sourceLine" id="cb22-14" title="14">                                <span class="dt">include.lower=</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb22-15" title="15">                                <span class="dt">allow.na =</span> <span class="ot">TRUE</span>), <span class="op">-</span>city,<span class="op">-</span>date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-16" title="16"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">insist</span>(<span class="kw">within_n_sds</span>(<span class="dv">11</span>), </a>
<a class="sourceLine" id="cb22-17" title="17">                  sales<span class="op">:</span>inventory,) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-18" title="18"><span class="st">  </span><span class="co">#assertr::assert(not_na, dplyr::everything()) %&gt;% </span></a>
<a class="sourceLine" id="cb22-19" title="19"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">chain_end</span>(<span class="dt">error_fun =</span> error_stop)</a></code></pre></div>
</div>
</div>
<div id="code-style" class="section level2">
<h2><span class="header-section-number">3.6</span> Code style</h2>
<div id="rule-1-include-names-before-all-functions" class="section level3">
<h3><span class="header-section-number">3.6.1</span> Rule 1: Include names before all functions</h3>
<ul>
<li><p>Include the package name before every function, even for <a href="https://rstudio.com/wp-content/uploads/2016/05/base-r.pdf">base R</a> functions, to make your code easier to read,</p></li>
<li><p>I started learning R by reading other people’s code. But I got confused where functions came from. Particularly when they used functions from lots of different packages mixed with base functions and their own functions, but without the package name shown. It made their code appear more complicated and intimidating than it was.</p></li>
<li><p>Another benefit of including the package name is hitting the tab key at the end of the double colon let’s us browse all the package’s functions in a scrollable list.</p></li>
<li><p>Also, try highlighting a function and its package name then hit the <code>F1</code> key to show the help page. While hitting the <code>F2</code> key can be a quick way to see all the possible arguments in a function. As well as seeing the default argument values the package author has chosen for you.</p></li>
</ul>
<p><img src="package_name.gif" width="1100%" /></p>
</div>
<div id="rule-2-add-argument-names-to-all-functions" class="section level3">
<h3><span class="header-section-number">3.6.2</span> Rule 2: Add argument names to all functions</h3>
<ul>
<li>Instead of relying on the order of the arguments the function expects, name every argument when you set its value. Your code will be quicker to understand when we know which arguments are set without having to read the help page for that function.</li>
</ul>
</div>
<div id="rule-3-each-line-does-one-thing" class="section level3">
<h3><span class="header-section-number">3.6.3</span> Rule 3: Each line does one thing</h3>
<ul>
<li><p>Each line of code should do one thing. You can do this by hitting the return key after every pipe <code>%&gt;%</code>, comma, or plus <code>+</code>. RStudio will then automatically indent your code in just the right way. You can also indent old code by blocking on to it and using the <a href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">RStudio shorcut</a> <code>Ctrl+Shift+A</code> in Windows (<code>Command+Shift+A</code> in Mac).</p></li>
<li><p>The code below works but doesn’t follow the three rules. It is cramped, slow to understand, and can be difficult to edit or re-use.</p></li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">ggplot</span>(df) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(date,sales, <span class="dt">colour =</span> city)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="st">  </span><span class="kw">gghighlight</span>(<span class="kw">max</span>(sales) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5000</span>, <span class="dt">label_params =</span> <span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">4</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">date_format</span>(<span class="st">&quot;%d %b %y&quot;</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="kw">as.Date</span>(<span class="st">&quot;2000-01-01&quot;</span>), <span class="kw">as.Date</span>(<span class="st">&quot;2015-07-01&quot;</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;US Housing Sales over time&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;US cities with more than 5k sales in a month&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: ggplot2 package demo data&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> years, <span class="dt">linetype =</span> <span class="dv">4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-9" title="9"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(), <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>), <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">60</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">9</span>), <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>), <span class="dt">legend.position =</span> <span class="st">&quot;right&quot;</span>, <span class="dt">legend.direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">22</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">size =</span> <span class="dv">18</span>), <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span>), <span class="dt">legend.title =</span> <span class="kw">element_blank</span>())</a></code></pre></div>
<ul>
<li>In contrast, the code below is identical to the code above, but it follows the three rules so you can more easily:</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Run your code top downwards in chunks adding more lines each time. Much like the popular ggplot flip-books I describe at bullet 11 in my collection of <a href="https://github.com/billster45/r-guides-and-galleries/blob/master/README.md#learn-to-visualise-data-with-r">R guides and galleries</a>.</p></li>
<li><p>Comment out one line of code (or just one argument in a function) to understand what it does when you run the code without it.</p></li>
<li><p>Find and edit arguments in a function (e.g. a font size)</p></li>
<li><p>Help others QA or re-use your code.</p></li>
<li><p>Help others new to R understand what you are doing and learn faster.</p></li>
<li><p>Avoid being a gatekeeper of your R knowledge and skills. Share, explain and democratise what you know. You can then move on to more sophisticated analysis in R with an even higher value. Richard Susskind advocates this in <a href="https://www.amazon.co.uk/dp/0198713398/">The Future of Professions</a>) and in my example of describing <a href="https://github.com/billster45/NLP-Intuition/blob/master/README.md">NLP techniques intuitively</a>.</p></li>
</ol>
<ul>
<li>Further tweaks to improve code clarity are to put spaces either side of the equals sign and to use <a href="https://styler.r-lib.org/">styler</a> to apply some of these rules automatically. You can also <a href="https://cran.r-project.org/web/packages/styler/vignettes/customizing_styler.html">customise styler</a> to apply your own rules. I want to try customising styler to apply rules 1 to 3 above. I don’t know if that’s possible yet.</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb24-4" title="4">    <span class="dt">x =</span> date,</a>
<a class="sourceLine" id="cb24-5" title="5">    <span class="dt">y =</span> sales,</a>
<a class="sourceLine" id="cb24-6" title="6">    <span class="dt">colour =</span> city</a>
<a class="sourceLine" id="cb24-7" title="7">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="st">  </span>gghighlight<span class="op">::</span><span class="kw">gghighlight</span>(<span class="kw">max</span>(sales) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5000</span>,</a>
<a class="sourceLine" id="cb24-11" title="11">                           <span class="dt">label_params =</span> <span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb24-12" title="12">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-13" title="13"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-14" title="14"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_date</span>(</a>
<a class="sourceLine" id="cb24-15" title="15">    <span class="dt">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>,</a>
<a class="sourceLine" id="cb24-16" title="16">    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">date_format</span>(<span class="st">&quot;%d %b %y&quot;</span>),</a>
<a class="sourceLine" id="cb24-17" title="17">    <span class="dt">limits =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb24-18" title="18">      <span class="kw">as.Date</span>(<span class="st">&quot;2000-01-01&quot;</span>),</a>
<a class="sourceLine" id="cb24-19" title="19">      <span class="kw">as.Date</span>(<span class="st">&quot;2015-07-01&quot;</span>)</a>
<a class="sourceLine" id="cb24-20" title="20">    )</a>
<a class="sourceLine" id="cb24-21" title="21">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-22" title="22"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb24-23" title="23">    <span class="dt">title =</span> <span class="st">&quot;US Housing Sales over time&quot;</span>,</a>
<a class="sourceLine" id="cb24-24" title="24">    <span class="dt">subtitle =</span> <span class="st">&quot;US cities with more than 5k sales in a month&quot;</span>,</a>
<a class="sourceLine" id="cb24-25" title="25">    <span class="dt">caption =</span> <span class="st">&quot;Source: ggplot2 package demo data&quot;</span></a>
<a class="sourceLine" id="cb24-26" title="26">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-27" title="27"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_vline</span>(</a>
<a class="sourceLine" id="cb24-28" title="28">    <span class="dt">xintercept =</span> years,</a>
<a class="sourceLine" id="cb24-29" title="29">    <span class="dt">linetype =</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb24-30" title="30">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-31" title="31"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb24-32" title="32">    <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb24-33" title="33">    <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb24-34" title="34">    <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb24-35" title="35">    <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb24-36" title="36">      <span class="dt">angle =</span> <span class="dv">60</span>,</a>
<a class="sourceLine" id="cb24-37" title="37">      <span class="dt">hjust =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb24-38" title="38">      <span class="dt">size =</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb24-39" title="39">    ),</a>
<a class="sourceLine" id="cb24-40" title="40">    <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>),</a>
<a class="sourceLine" id="cb24-41" title="41">    <span class="dt">legend.position =</span> <span class="st">&quot;right&quot;</span>,</a>
<a class="sourceLine" id="cb24-42" title="42">    <span class="dt">legend.direction =</span> <span class="st">&quot;vertical&quot;</span>,</a>
<a class="sourceLine" id="cb24-43" title="43">    <span class="dt">plot.title =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb24-44" title="44">      <span class="dt">size =</span> <span class="dv">22</span>,</a>
<a class="sourceLine" id="cb24-45" title="45">      <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span></a>
<a class="sourceLine" id="cb24-46" title="46">    ),</a>
<a class="sourceLine" id="cb24-47" title="47">    <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb24-48" title="48">      <span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>,</a>
<a class="sourceLine" id="cb24-49" title="49">      <span class="dt">size =</span> <span class="dv">18</span></a>
<a class="sourceLine" id="cb24-50" title="50">    ),</a>
<a class="sourceLine" id="cb24-51" title="51">    <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb24-52" title="52">      <span class="dt">hjust =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb24-53" title="53">      <span class="dt">size =</span> <span class="dv">12</span>,</a>
<a class="sourceLine" id="cb24-54" title="54">      <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span></a>
<a class="sourceLine" id="cb24-55" title="55">    ),</a>
<a class="sourceLine" id="cb24-56" title="56">    <span class="dt">legend.title =</span> <span class="kw">element_blank</span>()</a>
<a class="sourceLine" id="cb24-57" title="57">  )</a></code></pre></div>
<ul>
<li>Note this layout differs from the <a href="https://r4ds.had.co.nz/data-visualisation.html#the-layered-grammar-of-graphics">layered grammar of graphics</a> code template below.</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(</a>
<a class="sourceLine" id="cb25-3" title="3">     <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>),</a>
<a class="sourceLine" id="cb25-4" title="4">     <span class="dt">stat =</span> <span class="op">&lt;</span>STAT<span class="op">&gt;</span>, </a>
<a class="sourceLine" id="cb25-5" title="5">     <span class="dt">position =</span> <span class="op">&lt;</span>POSITION<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="st">  </span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="st">  </span><span class="er">&lt;</span>COORDINATE_FUNCTION<span class="op">&gt;</span><span class="st"> </span><span class="op">+</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="st">  </span><span class="er">&lt;</span>FACET_FUNCTION<span class="op">&gt;</span></a></code></pre></div>
<ul>
<li><p>My preference is for the code style to let you imagine data being “poured” into ggplot through the pipe. Then we tell ggplot which columns to map, then the geom, followed by the same co-ordinate and facet functions as Wickham recommends.</p></li>
<li><p>This is inspired by the code layout of the many flipbook guides (see bullet 11 <a href="https://github.com/billster45/r-guides-and-galleries/blob/master/README.md#learn-to-visualise-data-with-r">here</a> for examples).</p></li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="op">&lt;</span>DATA<span class="op">&gt;</span><span class="st"> </span><span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="st">  </span>ggplot2<span class="op">::</span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(</a>
<a class="sourceLine" id="cb26-5" title="5">     <span class="dt">stat =</span> <span class="op">&lt;</span>STAT<span class="op">&gt;</span>, </a>
<a class="sourceLine" id="cb26-6" title="6">     <span class="dt">position =</span> <span class="op">&lt;</span>POSITION<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb26-7" title="7"><span class="st">  </span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-8" title="8"><span class="st">  </span><span class="er">&lt;</span>COORDINATE_FUNCTION<span class="op">&gt;</span><span class="st"> </span><span class="op">+</span></a>
<a class="sourceLine" id="cb26-9" title="9"><span class="st">  </span><span class="er">&lt;</span>FACET_FUNCTION<span class="op">&gt;</span></a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="why-read-this.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-setup.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

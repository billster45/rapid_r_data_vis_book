<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Setup | Rapid R Data Viz Book</title>
  <meta name="description" content="Description" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Setup | Rapid R Data Viz Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Setup | Rapid R Data Viz Book" />
  
  <meta name="twitter:description" content="Description" />
  

<meta name="author" content="Bill Cockerill" />


<meta name="date" content="2019-10-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="exploratory-data-analysis.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/trelliscopejs_widget-0.3.0/trelliscope.min.js"></script>
<script src="libs/trelliscopejs_widget-binding-0.2.1/trelliscopejs_widget.js"></script>
<script src="libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<script src="libs/apexcharts-3.8.4/apexcharts.min.js"></script>
<script src="libs/apexcharter-binding-0.1.2/apexcharter.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.8/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/jquery-ui-1.11.4/jquery.ui.touch-punch.min.js"></script>
<link href="libs/c3-0.4.11/c3.min.css" rel="stylesheet" />
<script src="libs/c3-0.4.11/c3.min.js"></script>
<script src="libs/d3-3.5.5/d3.v3.min.js"></script>
<link href="libs/pivottable-2.19.0/pivot.min.css" rel="stylesheet" />
<script src="libs/pivottable-2.19.0/pivot.min.js"></script>
<script src="libs/pivottable-2.19.0/d3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/c3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.cs.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.da.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.de.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.es.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.fr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.it.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.nl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pt.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.ru.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.sq.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.tr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.zh.min.js"></script>
<link href="libs/subtotal-1.10.0/subtotal.min.css" rel="stylesheet" />
<script src="libs/subtotal-1.10.0/subtotal.min.js"></script>
<script src="libs/polyfill-0.1/polyfill.min.js"></script>
<link href="libs/rpivotTable_style-0.1/rpivotTable.css" rel="stylesheet" />
<script src="libs/rpivotTable-binding-0.3.0/rpivotTable.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Why read this?</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#a-rapid-approach-to-data-viz"><i class="fa fa-check"></i><b>1.1</b> A rapid approach to data viz</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-about-python"><i class="fa fa-check"></i><b>1.2</b> What about Python?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-about-other-tools"><i class="fa fa-check"></i><b>1.3</b> What about other tools?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#find-an-r-master-to-inspire-you"><i class="fa fa-check"></i><b>1.4</b> Find an R master to inspire you…</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Setup</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#navigating-an-r-markdown"><i class="fa fa-check"></i><b>2.1</b> Navigating an R markdown</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#libraries"><i class="fa fa-check"></i><b>2.2</b> Libraries</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#the-data-to-visualise"><i class="fa fa-check"></i><b>2.3</b> The data to visualise</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#code-style"><i class="fa fa-check"></i><b>2.4</b> Code style</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#include-the-package-name-every-time.-why"><i class="fa fa-check"></i><b>2.4.1</b> Include the package name every time. Why?</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#one-line-does-one-thing---hit-the-return-key-a-lot"><i class="fa fa-check"></i><b>2.4.2</b> One line does one thing - Hit the return key a lot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#start-with-dplyr-counts-and-summaries-in-console"><i class="fa fa-check"></i><b>3.1</b> Start with dplyr counts and summaries in console</a></li>
<li class="chapter" data-level="3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#next-plot-data-points"><i class="fa fa-check"></i><b>3.2</b> Next plot data points</a></li>
<li class="chapter" data-level="3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#why-start-with-geom_point"><i class="fa fa-check"></i><b>3.3</b> Why start with geom_point()?</a></li>
<li class="chapter" data-level="3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#now-facet-by-categories"><i class="fa fa-check"></i><b>3.4</b> Now facet by categories</a></li>
<li class="chapter" data-level="3.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#facet-with-trelliscopejs"><i class="fa fa-check"></i><b>3.5</b> Facet with trelliscopejs</a></li>
<li class="chapter" data-level="3.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#or-loop-and-plot-every-value"><i class="fa fa-check"></i><b>3.6</b> Or loop and plot every value</a></li>
<li class="chapter" data-level="3.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#polish-your-final-plot"><i class="fa fa-check"></i><b>3.7</b> Polish your final plot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="interactive-plots.html"><a href="interactive-plots.html"><i class="fa fa-check"></i><b>4</b> Interactive plots</a><ul>
<li class="chapter" data-level="4.1" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly"><i class="fa fa-check"></i><b>4.1</b> Plotly</a></li>
<li class="chapter" data-level="4.2" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-build-to-edit"><i class="fa fa-check"></i><b>4.2</b> Plotly Build to edit</a></li>
<li class="chapter" data-level="4.3" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-most-basic"><i class="fa fa-check"></i><b>4.3</b> Plotly (most basic)</a></li>
<li class="chapter" data-level="4.4" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-a-few-more-settings"><i class="fa fa-check"></i><b>4.4</b> plotly (a few more settings)</a></li>
<li class="chapter" data-level="4.5" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-bells-whistles"><i class="fa fa-check"></i><b>4.5</b> plotly (bells &amp; whistles)</a></li>
<li class="chapter" data-level="4.6" data-path="interactive-plots.html"><a href="interactive-plots.html#apexchater-simple"><i class="fa fa-check"></i><b>4.6</b> apexchater simple</a></li>
<li class="chapter" data-level="4.7" data-path="interactive-plots.html"><a href="interactive-plots.html#apexchater-with-bells-whistles"><i class="fa fa-check"></i><b>4.7</b> apexchater with bells &amp; whistles</a></li>
<li class="chapter" data-level="4.8" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-for-time-series-data"><i class="fa fa-check"></i><b>4.8</b> dygraphs for time series data</a></li>
<li class="chapter" data-level="4.9" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-bells-whistles"><i class="fa fa-check"></i><b>4.9</b> dygraphs bells &amp; whistles</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="animation.html"><a href="animation.html"><i class="fa fa-check"></i><b>5</b> Animation</a></li>
<li class="chapter" data-level="6" data-path="svg-polish.html"><a href="svg-polish.html"><i class="fa fa-check"></i><b>6</b> SVG Polish</a></li>
<li class="chapter" data-level="7" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>7</b> Tables</a><ul>
<li class="chapter" data-level="7.1" data-path="tables.html"><a href="tables.html#dt"><i class="fa fa-check"></i><b>7.1</b> DT</a></li>
<li class="chapter" data-level="7.2" data-path="tables.html"><a href="tables.html#rpivottable-simple"><i class="fa fa-check"></i><b>7.2</b> rpivottable simple</a></li>
<li class="chapter" data-level="7.3" data-path="tables.html"><a href="tables.html#rpivottable-bells-whistles"><i class="fa fa-check"></i><b>7.3</b> rpivottable (bells &amp; whistles)</a></li>
<li class="chapter" data-level="7.4" data-path="tables.html"><a href="tables.html#formattable"><i class="fa fa-check"></i><b>7.4</b> formattable</a></li>
<li class="chapter" data-level="7.5" data-path="tables.html"><a href="tables.html#kable"><i class="fa fa-check"></i><b>7.5</b> kable</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="colours.html"><a href="colours.html"><i class="fa fa-check"></i><b>8</b> Colours</a></li>
<li class="chapter" data-level="9" data-path="final-document.html"><a href="final-document.html"><i class="fa fa-check"></i><b>9</b> Final document</a><ul>
<li class="chapter" data-level="9.1" data-path="final-document.html"><a href="final-document.html#crosstalk"><i class="fa fa-check"></i><b>9.1</b> crosstalk</a></li>
<li class="chapter" data-level="9.2" data-path="final-document.html"><a href="final-document.html#flexdashboard"><i class="fa fa-check"></i><b>9.2</b> flexdashboard</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="which-viz-and-other-resources.html"><a href="which-viz-and-other-resources.html"><i class="fa fa-check"></i><b>10</b> Which viz and other resources</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rapid R Data Viz Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Setup</h1>
<div id="navigating-an-r-markdown" class="section level2">
<h2><span class="header-section-number">2.1</span> Navigating an R markdown</h2>
<ul>
<li>A quick way to move around an R Markdown document in RStudio is through the document outline. You can see the outline by holding down Ctrl+Shift+O, clicking the top right icon in the code pane, or left clicking on the bottom bar of the R markdown file. The gif below shows you how it works.</li>
</ul>
<p><img src="outline.gif" width="100%" />
</br>
* Recorded with ScreenToGif: <a href="https://www.screentogif.com/" class="uri">https://www.screentogif.com/</a></p>
</div>
<div id="libraries" class="section level2">
<h2><span class="header-section-number">2.2</span> Libraries</h2>
<p>Here are all the R packages that are used in this guide.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># data vis https://www.htmlwidgets.org/index.html</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(ggplot2) <span class="co"># static charts - amazing variety</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(plotly) <span class="co"># interactive charts</span></a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;plotly&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     last_plot</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     layout</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">library</span>(apexcharter) <span class="co"># much like the paid for highchater js library. Powerful</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">library</span>(rayshader) <span class="co"># 3D charts</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">library</span>(trelliscopejs) <span class="co">#  small multiples</span></a></code></pre></div>
<pre><code>## Registered S3 method overwritten by &#39;trelliscopejs&#39;:
##   method from   
##   +.gg   ggplot2</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">library</span>(dygraphs) <span class="co"># awesome interactive timeseries</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co"># ggplot extensions https://www.ggplot2-exts.org/gallery/</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="kw">library</span>(scales) <span class="co"># improve your scales</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">library</span>(gganimate) <span class="co"># animate your ggplot</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="kw">library</span>(png) <span class="co"># dunno</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="kw">library</span>(directlabels) <span class="co"># for directly labelling lines for example</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="kw">library</span>(gghighlight) <span class="co"># label points of interest on your charts</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="kw">library</span>(ggrepel) <span class="co"># move labels so they don&#39;t overlap</span></a>
<a class="sourceLine" id="cb8-10" title="10"></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co"># colours</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="kw">library</span>(RColorBrewer) <span class="co"># ready to use colour pallets</span></a>
<a class="sourceLine" id="cb8-13" title="13"></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co"># tables</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="kw">library</span>(kableExtra) <span class="co"># attractive static tables</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="kw">library</span>(formattable) <span class="co"># colour tables. Like Excel&#39;s conditional formattinng</span></a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;formattable&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:scales&#39;:
## 
##     comma, percent, scientific</code></pre>
<pre><code>## The following object is masked from &#39;package:plotly&#39;:
## 
##     style</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">library</span>(rpivotTable) <span class="co"># like Excel&#39;s pivot table</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="kw">library</span>(DT) <span class="co"># awesome interactive tables</span></a>
<a class="sourceLine" id="cb12-3" title="3"></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co"># Quality Assurance</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="kw">library</span>(tidylog) <span class="co"># great for QA on the fly </span></a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;tidylog&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:plotly&#39;:
## 
##     distinct, filter, group_by, mutate, select, summarise,
##     transmute</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="co"># wrangling / munging / manipulating</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">library</span>(tidyverse) <span class="co"># loads of useful packages in one </span></a></code></pre></div>
<pre><code>## -- Attaching packages ------ tidyverse 1.2.1 --</code></pre>
<pre><code>## v tibble  2.1.3     v purrr   0.3.2
## v tidyr   1.0.0     v dplyr   0.8.3
## v readr   1.3.1     v stringr 1.4.0
## v tibble  2.1.3     v forcats 0.4.0</code></pre>
<pre><code>## -- Conflicts --------- tidyverse_conflicts() --
## x dplyr::add_count()     masks tidylog::add_count()
## x dplyr::add_tally()     masks tidylog::add_tally()
## x dplyr::anti_join()     masks tidylog::anti_join()
## x readr::col_factor()    masks scales::col_factor()
## x dplyr::count()         masks tidylog::count()
## x purrr::discard()       masks scales::discard()
## x dplyr::distinct()      masks tidylog::distinct(), plotly::distinct()
## x dplyr::distinct_all()  masks tidylog::distinct_all()
## x dplyr::distinct_at()   masks tidylog::distinct_at()
## x dplyr::distinct_if()   masks tidylog::distinct_if()
## x tidyr::drop_na()       masks tidylog::drop_na()
## x tidyr::fill()          masks tidylog::fill()
## x dplyr::filter()        masks tidylog::filter(), plotly::filter(), stats::filter()
## x dplyr::filter_all()    masks tidylog::filter_all()
## x dplyr::filter_at()     masks tidylog::filter_at()
## x dplyr::filter_if()     masks tidylog::filter_if()
## x dplyr::full_join()     masks tidylog::full_join()
## x tidyr::gather()        masks tidylog::gather()
## x dplyr::group_by()      masks tidylog::group_by(), plotly::group_by()
## x dplyr::group_by_all()  masks tidylog::group_by_all()
## x dplyr::group_by_at()   masks tidylog::group_by_at()
## x dplyr::group_by_if()   masks tidylog::group_by_if()
## x dplyr::group_rows()    masks kableExtra::group_rows()
## x dplyr::inner_join()    masks tidylog::inner_join()
## x dplyr::lag()           masks stats::lag()
## x dplyr::left_join()     masks tidylog::left_join()
## x dplyr::mutate()        masks tidylog::mutate(), plotly::mutate()
## x dplyr::mutate_all()    masks tidylog::mutate_all()
## x dplyr::mutate_at()     masks tidylog::mutate_at()
## x dplyr::mutate_if()     masks tidylog::mutate_if()
## x tidyr::replace_na()    masks tidylog::replace_na()
## x dplyr::right_join()    masks tidylog::right_join()
## x dplyr::select()        masks tidylog::select(), plotly::select()
## x dplyr::select_all()    masks tidylog::select_all()
## x dplyr::select_at()     masks tidylog::select_at()
## x dplyr::select_if()     masks tidylog::select_if()
## x dplyr::semi_join()     masks tidylog::semi_join()
## x tidyr::spread()        masks tidylog::spread()
## x dplyr::summarise()     masks tidylog::summarise(), plotly::summarise()
## x dplyr::summarise_all() masks tidylog::summarise_all()
## x dplyr::summarise_at()  masks tidylog::summarise_at()
## x dplyr::summarise_if()  masks tidylog::summarise_if()
## x dplyr::summarize()     masks tidylog::summarize()
## x dplyr::summarize_all() masks tidylog::summarize_all()
## x dplyr::summarize_at()  masks tidylog::summarize_at()
## x dplyr::summarize_if()  masks tidylog::summarize_if()
## x dplyr::tally()         masks tidylog::tally()
## x dplyr::top_n()         masks tidylog::top_n()
## x dplyr::transmute()     masks tidylog::transmute(), plotly::transmute()
## x dplyr::transmute_all() masks tidylog::transmute_all()
## x dplyr::transmute_at()  masks tidylog::transmute_at()
## x dplyr::transmute_if()  masks tidylog::transmute_if()</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">library</span>(glue) <span class="co"># not sure</span></a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;glue&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     collapse</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="co"># time series tools</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">library</span>(anytime) <span class="co"># convert text into the right date type</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="kw">library</span>(xts) <span class="co"># convert to time series for dygraphs</span></a></code></pre></div>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;xts&#39;:
##   method     from
##   as.zoo.xts zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;xts&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     first, last</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">library</span>(tsbox) <span class="co"># easily convert to time series</span></a>
<a class="sourceLine" id="cb30-2" title="2"></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="co"># sample data</span></a>
<a class="sourceLine" id="cb30-4" title="4"><span class="kw">library</span>(mosaicData) <span class="co"># sample data</span></a>
<a class="sourceLine" id="cb30-5" title="5"></a>
<a class="sourceLine" id="cb30-6" title="6"><span class="kw">library</span>(xfun)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;xfun&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     attr, isFALSE</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1"><span class="co"># https://github.com/vincentarelbundock/Rdatasets/blob/master/Rdatasets.R</span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="co"># https://vincentarelbundock.github.io/Rdatasets/</span></a></code></pre></div>
</div>
<div id="the-data-to-visualise" class="section level2">
<h2><span class="header-section-number">2.3</span> The data to visualise</h2>
<ul>
<li><p>A lot of data visilisation is showing how values change over time. Therefore, rather than the ususal iris or mtcars, this guide uses a built-in data set within ggplot of housing sales in American cities over several years.</p></li>
<li><p>The only manipulation we will do is to create a real date using the excellet R lubrdate package. We also reduce the number of American cities so our first charts aren’t too crowded.</p></li>
<li><p>In this simple data preperation or wrangling I’ll use tidylog with dplyr. It’s a simple way to do fast basic Quality Asssurance as you code.</p></li>
<li><p>Simple replace dplyr verbs with the same verb in tidylog. This will tell you key info about what is being done to your data by each dplyr verb. For example, how many rows are dropped or added by filters or joins, and what percentage of values changed after a mutate.</p></li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="co"># create a data frame with a real date for plotting</span></a>
<a class="sourceLine" id="cb34-2" title="2">df &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>txhousing <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">make_date</span>(<span class="dt">year =</span> year,</a>
<a class="sourceLine" id="cb34-4" title="4">                                              <span class="dt">month =</span> month, </a>
<a class="sourceLine" id="cb34-5" title="5">                                              <span class="dt">day =</span><span class="dv">1</span>)) </a></code></pre></div>
<pre><code>## mutate: changed 8,602 values (100%) of &#39;date&#39; (0 new NA)</code></pre>
<ul>
<li>Let’s also create a data frame with fewer cities. This will make plots less crowded later. Here we select only cities where the maximum number in any month is 800 or more.</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co"># reduce the number of cities for simpler plots</span></a>
<a class="sourceLine" id="cb36-2" title="2">df_red &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">sales_max =</span> base<span class="op">::</span><span class="kw">max</span>(sales)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">filter</span>(sales_max <span class="op">&gt;=</span><span class="st"> </span><span class="dv">800</span>)</a></code></pre></div>
<pre><code>## mutate (grouped): new variable &#39;sales_max&#39; with 27 unique values and 43% NA</code></pre>
<pre><code>## filter: removed 6,545 rows (76%), 2,057 rows remaining</code></pre>
<ul>
<li>But look! Look at these useful messages above created by tiylog. It tells us what percentage of values are NA. And how many rows the filter has removed. But the mutate has gone wrong as it tells us there are 43% NA. Well spotted tidylog. We correct it below by removing the NAs from the maximum sales value.</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="co"># reduce the number of cities for simpler plots</span></a>
<a class="sourceLine" id="cb39-2" title="2">df_red &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-4" title="4"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">sales_max =</span> base<span class="op">::</span><span class="kw">max</span>(sales, </a>
<a class="sourceLine" id="cb39-5" title="5">                                        <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-6" title="6"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-7" title="7"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">filter</span>(sales_max <span class="op">&gt;=</span><span class="st"> </span><span class="dv">800</span>)</a></code></pre></div>
<pre><code>## mutate (grouped): new variable &#39;sales_max&#39; with 45 unique values and 0% NA</code></pre>
<pre><code>## filter: removed 6,545 rows (76%), 2,057 rows remaining</code></pre>
<ul>
<li><p>This has worked with 0% NA.</p></li>
<li><p>Let’s take a quick look at the top few rows of the data using kableExtra table. A later chapter explores tables.</p></li>
</ul>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1">kableExtra<span class="op">::</span><span class="kw">kable</span>(utils<span class="op">::</span><span class="kw">head</span>(df))</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
city
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
month
</th>
<th style="text-align:right;">
sales
</th>
<th style="text-align:right;">
volume
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
listings
</th>
<th style="text-align:right;">
inventory
</th>
<th style="text-align:left;">
date
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
5380000
</td>
<td style="text-align:right;">
71400
</td>
<td style="text-align:right;">
701
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:left;">
2000-01-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
6505000
</td>
<td style="text-align:right;">
58700
</td>
<td style="text-align:right;">
746
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:left;">
2000-02-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
130
</td>
<td style="text-align:right;">
9285000
</td>
<td style="text-align:right;">
58100
</td>
<td style="text-align:right;">
784
</td>
<td style="text-align:right;">
6.8
</td>
<td style="text-align:left;">
2000-03-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
9730000
</td>
<td style="text-align:right;">
68600
</td>
<td style="text-align:right;">
785
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:left;">
2000-04-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
10590000
</td>
<td style="text-align:right;">
67300
</td>
<td style="text-align:right;">
794
</td>
<td style="text-align:right;">
6.8
</td>
<td style="text-align:left;">
2000-05-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
13910000
</td>
<td style="text-align:right;">
66900
</td>
<td style="text-align:right;">
780
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:left;">
2000-06-01
</td>
</tr>
</tbody>
</table>
</div>
<div id="code-style" class="section level2">
<h2><span class="header-section-number">2.4</span> Code style</h2>
<div id="include-the-package-name-every-time.-why" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Include the package name every time. Why?</h3>
<ul>
<li><p>When I first started learning R I tried to teach myself with other people’s code. I got confused where functions came from, particularly when they used their own functions. It made their code appear harder, more complex and cleverer than it really was.</p></li>
<li><p>Instead I use the package name before every function. Even base R functions. This can help people new to R who read your code. And it can help you when yourself when you come back to code you did ages ago and have forgotten what you were doing.</p></li>
<li><p>Another good reason to use the package name is you can hit the tab key at the end of the double colon like this and see all the functions in that package.</p></li>
<li><p>Also, try highlighting a function, including the package name and hit the F1 key. (You’ll see David Robinson do this a lot even on his own packages.) Also try hitting the F2 key to quickly see all the possible parameters in a function and see what the defaults are that it will use if you don’t set them to a new value.</p></li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">ggplot2<span class="op">::</span></a>
<a class="sourceLine" id="cb43-2" title="2">dplyr<span class="op">::</span><span class="kw">arrange</span>()</a>
<a class="sourceLine" id="cb43-3" title="3">ggrepel<span class="op">::</span><span class="kw">geom_text_repel</span>()</a></code></pre></div>
<p><img src="package_name.gif" width="1100%" /></p>
</div>
<div id="one-line-does-one-thing---hit-the-return-key-a-lot" class="section level3">
<h3><span class="header-section-number">2.4.2</span> One line does one thing - Hit the return key a lot</h3>
<ul>
<li><p>Ideally one line does one thing. Hit the return key after every pipe, comma or plus symbol in ggplot and RStudio tabs your code in the right way.</p></li>
<li><p>Also, name the parameters in each function instead of relying on theorder the function expects them. Your code is then easier to read by others and you later.</p></li>
<li><p>For example, below this works but doesn’t follow any of those rules. The code is cramped and slow to understand, edit or re-use.</p></li>
</ul>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="kw">ggplot</span>(df) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(date, sales, <span class="dt">colour =</span> city)) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb44-4" title="4"><span class="st">  </span><span class="kw">gghighlight</span>(<span class="kw">max</span>(sales) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5000</span>, <span class="dt">label_params =</span> <span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">4</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-5" title="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-6" title="6"><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">date_format</span>(<span class="st">&quot;%d %b %y&quot;</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="kw">as.Date</span>(<span class="st">&quot;2000-01-01&quot;</span>), <span class="kw">as.Date</span>(<span class="st">&quot;2015-07-01&quot;</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;US Housing Sales over time&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;US cities with more than 5k sales in a month&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: ggplot2 package demo data&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-8" title="8"><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> years, <span class="dt">linetype =</span> <span class="dv">4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-9" title="9"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(), <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>), <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">60</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">9</span>), <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>), <span class="dt">legend.position =</span> <span class="st">&quot;right&quot;</span>, <span class="dt">legend.direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">22</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">size =</span> <span class="dv">18</span>), <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span>), <span class="dt">legend.title =</span> <span class="kw">element_blank</span>())</a></code></pre></div>
<ul>
<li>In oontrast, the code below is the same code as above but it follows these 5 rules:</li>
</ul>
<ol style="list-style-type: decimal">
<li>Use package names.</li>
<li>Each line does one thing (e.g. a function or a parameter setting in a function).</li>
<li>Name every parameter you put in a function.</li>
<li>Tabbed consistently by hitting the return key after each pipe ( %&gt;% ), comma or plus symbol (+).</li>
<li>Put spaces around equals.</li>
</ol>
<p>The benefits of following these rules are that you can:</p>
<ol style="list-style-type: decimal">
<li>Run your code top downwards in chunks adding more lines each time (like the popular ggplot flipbooks I describe at bullet 11 here: <a href="https://github.com/billster45/r-guides-and-galleries/blob/master/README.md#learn-to-visualise-data-with-r" class="uri">https://github.com/billster45/r-guides-and-galleries/blob/master/README.md#learn-to-visualise-data-with-r</a>)</li>
<li>Comment out whole lines of code or parameters in a function to undersatnd what they are doing.</li>
<li>Easily find and edit parameaters in a function (e.g. a font size)</li>
<li>Help others QA or re-use your code more quickly.</li>
<li>Help others new to R understand what you are doing and learn R faster.</li>
</ol>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb45-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb45-4" title="4">    <span class="dt">x =</span> date,</a>
<a class="sourceLine" id="cb45-5" title="5">    <span class="dt">y =</span> sales,</a>
<a class="sourceLine" id="cb45-6" title="6">    <span class="dt">colour =</span> city</a>
<a class="sourceLine" id="cb45-7" title="7">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb45-9" title="9"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb45-10" title="10"><span class="st">  </span>gghighlight<span class="op">::</span><span class="kw">gghighlight</span>(<span class="kw">max</span>(sales) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5000</span>,</a>
<a class="sourceLine" id="cb45-11" title="11">                           <span class="dt">label_params =</span> <span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb45-12" title="12">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-13" title="13"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-14" title="14"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_date</span>(</a>
<a class="sourceLine" id="cb45-15" title="15">    <span class="dt">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>,</a>
<a class="sourceLine" id="cb45-16" title="16">    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">date_format</span>(<span class="st">&quot;%d %b %y&quot;</span>),</a>
<a class="sourceLine" id="cb45-17" title="17">    <span class="dt">limits =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb45-18" title="18">      <span class="kw">as.Date</span>(<span class="st">&quot;2000-01-01&quot;</span>),</a>
<a class="sourceLine" id="cb45-19" title="19">      <span class="kw">as.Date</span>(<span class="st">&quot;2015-07-01&quot;</span>)</a>
<a class="sourceLine" id="cb45-20" title="20">    )</a>
<a class="sourceLine" id="cb45-21" title="21">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-22" title="22"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb45-23" title="23">    <span class="dt">title =</span> <span class="st">&quot;US Housing Sales over time&quot;</span>,</a>
<a class="sourceLine" id="cb45-24" title="24">    <span class="dt">subtitle =</span> <span class="st">&quot;US cities with more than 5k sales in a month&quot;</span>,</a>
<a class="sourceLine" id="cb45-25" title="25">    <span class="dt">caption =</span> <span class="st">&quot;Source: ggplot2 package demo data&quot;</span></a>
<a class="sourceLine" id="cb45-26" title="26">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-27" title="27"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_vline</span>(</a>
<a class="sourceLine" id="cb45-28" title="28">    <span class="dt">xintercept =</span> years,</a>
<a class="sourceLine" id="cb45-29" title="29">    <span class="dt">linetype =</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb45-30" title="30">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-31" title="31"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb45-32" title="32">    <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb45-33" title="33">    <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb45-34" title="34">    <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb45-35" title="35">    <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb45-36" title="36">      <span class="dt">angle =</span> <span class="dv">60</span>,</a>
<a class="sourceLine" id="cb45-37" title="37">      <span class="dt">hjust =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb45-38" title="38">      <span class="dt">size =</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb45-39" title="39">    ),</a>
<a class="sourceLine" id="cb45-40" title="40">    <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>),</a>
<a class="sourceLine" id="cb45-41" title="41">    <span class="dt">legend.position =</span> <span class="st">&quot;right&quot;</span>,</a>
<a class="sourceLine" id="cb45-42" title="42">    <span class="dt">legend.direction =</span> <span class="st">&quot;vertical&quot;</span>,</a>
<a class="sourceLine" id="cb45-43" title="43">    <span class="dt">plot.title =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb45-44" title="44">      <span class="dt">size =</span> <span class="dv">22</span>,</a>
<a class="sourceLine" id="cb45-45" title="45">      <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span></a>
<a class="sourceLine" id="cb45-46" title="46">    ),</a>
<a class="sourceLine" id="cb45-47" title="47">    <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb45-48" title="48">      <span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>,</a>
<a class="sourceLine" id="cb45-49" title="49">      <span class="dt">size =</span> <span class="dv">18</span></a>
<a class="sourceLine" id="cb45-50" title="50">    ),</a>
<a class="sourceLine" id="cb45-51" title="51">    <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb45-52" title="52">      <span class="dt">hjust =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb45-53" title="53">      <span class="dt">size =</span> <span class="dv">12</span>,</a>
<a class="sourceLine" id="cb45-54" title="54">      <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span></a>
<a class="sourceLine" id="cb45-55" title="55">    ),</a>
<a class="sourceLine" id="cb45-56" title="56">    <span class="dt">legend.title =</span> <span class="kw">element_blank</span>()</a>
<a class="sourceLine" id="cb45-57" title="57">  )</a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-setup.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Setup | Rapid R Data Viz Book</title>
  <meta name="description" content="Description" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Setup | Rapid R Data Viz Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Setup | Rapid R Data Viz Book" />
  
  <meta name="twitter:description" content="Description" />
  

<meta name="author" content="Bill Cockerill" />


<meta name="date" content="2019-10-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="exploratory-data-analysis.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/trelliscopejs_widget-0.3.0/trelliscope.min.js"></script>
<script src="libs/trelliscopejs_widget-binding-0.2.1/trelliscopejs_widget.js"></script>
<script src="libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<script src="libs/apexcharts-3.8.4/apexcharts.min.js"></script>
<script src="libs/apexcharter-binding-0.1.2/apexcharter.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.8/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.10.16/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.10.16/js/dataTables.fixedColumns.min.js"></script>
<link href="libs/dt-ext-buttons-1.10.16/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.10.16/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.flash.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.print.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/jquery-ui-1.11.4/jquery.ui.touch-punch.min.js"></script>
<link href="libs/c3-0.4.11/c3.min.css" rel="stylesheet" />
<script src="libs/c3-0.4.11/c3.min.js"></script>
<script src="libs/d3-3.5.5/d3.v3.min.js"></script>
<link href="libs/pivottable-2.19.0/pivot.min.css" rel="stylesheet" />
<script src="libs/pivottable-2.19.0/pivot.min.js"></script>
<script src="libs/pivottable-2.19.0/d3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/c3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.cs.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.da.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.de.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.es.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.fr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.it.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.nl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pt.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.ru.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.sq.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.tr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.zh.min.js"></script>
<link href="libs/subtotal-1.10.0/subtotal.min.css" rel="stylesheet" />
<script src="libs/subtotal-1.10.0/subtotal.min.js"></script>
<script src="libs/polyfill-0.1/polyfill.min.js"></script>
<link href="libs/rpivotTable_style-0.1/rpivotTable.css" rel="stylesheet" />
<script src="libs/rpivotTable-binding-0.3.0/rpivotTable.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.2/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.2/js/bootstrap.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Rapid R Data Viz Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Why read this?</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#the-best-data-analysis-is-fast-and-intuitive"><i class="fa fa-check"></i><b>1.1</b> The best data analysis is fast and intuitive</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-about-python-for-data-viz"><i class="fa fa-check"></i><b>1.2</b> What about Python for data viz?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-about-point-and-click-tools"><i class="fa fa-check"></i><b>1.3</b> What about Point and Click tools?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#find-an-r-master-to-inspire-you"><i class="fa fa-check"></i><b>1.4</b> Find an R master to inspire you</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#david-robinson"><i class="fa fa-check"></i><b>1.4.1</b> David Robinson</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#claus-wilke"><i class="fa fa-check"></i><b>1.4.2</b> Claus Wilke</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Setup</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#navigating-an-r-markdown"><i class="fa fa-check"></i><b>2.1</b> Navigating an R markdown</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#load-r-packages-to-your-library"><i class="fa fa-check"></i><b>2.2</b> Load R packages to your library</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#the-data-to-visualise"><i class="fa fa-check"></i><b>2.3</b> The data to visualise</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#code-style"><i class="fa fa-check"></i><b>2.4</b> Code style</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#include-the-package-name-every-time.-why"><i class="fa fa-check"></i><b>2.4.1</b> Include the package name every time. Why?</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#one-line-does-one-thing---hit-the-return-key-a-lot"><i class="fa fa-check"></i><b>2.4.2</b> One line does one thing - hit the return key a lot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#start-with-dplyr-counts-and-summaries-in-console"><i class="fa fa-check"></i><b>3.1</b> Start with dplyr counts and summaries in console</a></li>
<li class="chapter" data-level="3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#next-plot-data-points"><i class="fa fa-check"></i><b>3.2</b> Next plot data points</a></li>
<li class="chapter" data-level="3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#now-facet-by-categories"><i class="fa fa-check"></i><b>3.3</b> Now facet by categories</a></li>
<li class="chapter" data-level="3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#facet-interactively-trelliscopejs"><i class="fa fa-check"></i><b>3.4</b> Facet interactively (trelliscopejs)</a></li>
<li class="chapter" data-level="3.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#or-loop-and-plot-every-value"><i class="fa fa-check"></i><b>3.5</b> Or loop and plot every value</a></li>
<li class="chapter" data-level="3.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#polish-your-final-plot"><i class="fa fa-check"></i><b>3.6</b> Polish your final plot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html"><i class="fa fa-check"></i><b>4</b> Why start with geom_point() ?</a><ul>
<li class="chapter" data-level="4.1" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#the-problem-with-bars-and-columns"><i class="fa fa-check"></i><b>4.1</b> The problem with bars and columns</a></li>
<li class="chapter" data-level="4.2" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#go-back-to-geom_point"><i class="fa fa-check"></i><b>4.2</b> Go back to geom_point()</a></li>
<li class="chapter" data-level="4.3" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#the-final-choice---geom_point-and-stat_summary"><i class="fa fa-check"></i><b>4.3</b> The final choice - geom_point() and stat_summary()</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-plots.html"><a href="interactive-plots.html"><i class="fa fa-check"></i><b>5</b> Interactive plots</a><ul>
<li class="chapter" data-level="5.1" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-cheat-convert-ggplot-with-plotlyggplotly"><i class="fa fa-check"></i><b>5.1</b> Plotly cheat: convert ggplot with plotly::ggplotly()</a></li>
<li class="chapter" data-level="5.2" data-path="interactive-plots.html"><a href="interactive-plots.html#edit-ggplot-conversion-with-plotlyplotly_build"><i class="fa fa-check"></i><b>5.2</b> Edit ggplot conversion with plotly::plotly_build()</a></li>
<li class="chapter" data-level="5.3" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-most-basic"><i class="fa fa-check"></i><b>5.3</b> Plotly most basic</a></li>
<li class="chapter" data-level="5.4" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-a-few-more-settings"><i class="fa fa-check"></i><b>5.4</b> plotly (a few more settings)</a></li>
<li class="chapter" data-level="5.5" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-bells-whistles"><i class="fa fa-check"></i><b>5.5</b> plotly (bells &amp; whistles)</a></li>
<li class="chapter" data-level="5.6" data-path="interactive-plots.html"><a href="interactive-plots.html#apexchater-simple"><i class="fa fa-check"></i><b>5.6</b> apexchater simple</a></li>
<li class="chapter" data-level="5.7" data-path="interactive-plots.html"><a href="interactive-plots.html#apexchater-with-bells-whistles"><i class="fa fa-check"></i><b>5.7</b> apexchater with bells &amp; whistles</a></li>
<li class="chapter" data-level="5.8" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-for-time-series-data"><i class="fa fa-check"></i><b>5.8</b> dygraphs for time series data</a></li>
<li class="chapter" data-level="5.9" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-bells-whistles"><i class="fa fa-check"></i><b>5.9</b> dygraphs bells &amp; whistles</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="animation.html"><a href="animation.html"><i class="fa fa-check"></i><b>6</b> Animation</a></li>
<li class="chapter" data-level="7" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>7</b> Tables</a><ul>
<li class="chapter" data-level="7.1" data-path="tables.html"><a href="tables.html#datatables-dt-basic"><i class="fa fa-check"></i><b>7.1</b> DataTables (DT) basic</a></li>
<li class="chapter" data-level="7.2" data-path="tables.html"><a href="tables.html#datatables-bells-whisltes"><i class="fa fa-check"></i><b>7.2</b> DataTables bells &amp; whisltes</a></li>
<li class="chapter" data-level="7.3" data-path="tables.html"><a href="tables.html#colour-datatable-with-formattable"><i class="fa fa-check"></i><b>7.3</b> Colour DataTable with formattable</a></li>
<li class="chapter" data-level="7.4" data-path="tables.html"><a href="tables.html#rpivottable-simple"><i class="fa fa-check"></i><b>7.4</b> rpivottable simple</a></li>
<li class="chapter" data-level="7.5" data-path="tables.html"><a href="tables.html#rpivottable-bells-whistles"><i class="fa fa-check"></i><b>7.5</b> rpivottable (bells &amp; whistles)</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="colours.html"><a href="colours.html"><i class="fa fa-check"></i><b>8</b> Colours</a><ul>
<li class="chapter" data-level="8.1" data-path="colours.html"><a href="colours.html#prismatic"><i class="fa fa-check"></i><b>8.1</b> Prismatic</a></li>
<li class="chapter" data-level="8.2" data-path="colours.html"><a href="colours.html#hand-picked-colours"><i class="fa fa-check"></i><b>8.2</b> Hand picked colours</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="final-document.html"><a href="final-document.html"><i class="fa fa-check"></i><b>9</b> Final document</a><ul>
<li class="chapter" data-level="9.1" data-path="final-document.html"><a href="final-document.html#picking-a-final-output-doc"><i class="fa fa-check"></i><b>9.1</b> Picking a final output doc</a></li>
<li class="chapter" data-level="9.2" data-path="final-document.html"><a href="final-document.html#crosstalk"><i class="fa fa-check"></i><b>9.2</b> crosstalk</a></li>
<li class="chapter" data-level="9.3" data-path="final-document.html"><a href="final-document.html#flexdashboard"><i class="fa fa-check"></i><b>9.3</b> flexdashboard</a></li>
<li class="chapter" data-level="9.4" data-path="final-document.html"><a href="final-document.html#r-markdown-with-floating-contents-and-tabbed-pates"><i class="fa fa-check"></i><b>9.4</b> R markdown with floating contents and tabbed pates</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rapid R Data Viz Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Setup</h1>
<div id="navigating-an-r-markdown" class="section level2">
<h2><span class="header-section-number">2.1</span> Navigating an R markdown</h2>
<ul>
<li>A quick way to move around an R Markdown document in RStudio is through the document outline. You can see the outline by holding down Ctrl+Shift+O, clicking the top right icon in the code pane, or left clicking on the bottom bar of the R markdown file. The gif below shows you how it works.</li>
</ul>
<p><img src="outline.gif" width="100%" />
</br>
* Recorded with ScreenToGif: <a href="https://www.screentogif.com/" class="uri">https://www.screentogif.com/</a></p>
</div>
<div id="load-r-packages-to-your-library" class="section level2">
<h2><span class="header-section-number">2.2</span> Load R packages to your library</h2>
<p>Here are all the R packages that are used in this guide.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># data vis https://www.htmlwidgets.org/index.html</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(ggplot2) <span class="co"># static charts - amazing variety</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(plotly) <span class="co"># interactive charts</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">library</span>(apexcharter) <span class="co"># much like the paid for highchater js library. Powerful</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(rayshader) <span class="co"># 3D charts</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">library</span>(trelliscopejs) <span class="co">#  small multiples</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">library</span>(dygraphs) <span class="co"># awesome interactive timeseries</span></a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co"># ggplot extensions https://www.ggplot2-exts.org/gallery/</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw">library</span>(scales) <span class="co"># improve your scales</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw">library</span>(gganimate) <span class="co"># animate your ggplot</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">library</span>(png) <span class="co"># dunno</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">library</span>(directlabels) <span class="co"># for directly labelling lines for example</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">library</span>(gghighlight) <span class="co"># label points of interest on your charts</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">library</span>(ggrepel) <span class="co"># move labels so they don&#39;t overlap</span></a>
<a class="sourceLine" id="cb1-16" title="16"></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co"># colours</span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="kw">library</span>(RColorBrewer) <span class="co"># ready to use colour pallets</span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="kw">library</span>(prismatic) <span class="co"># palettes and ways to tweak an entier pallete</span></a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co"># tables</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="kw">library</span>(kableExtra) <span class="co"># attractive static tables</span></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="kw">library</span>(formattable) <span class="co"># colour tables. Like Excel&#39;s conditional formattinng</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="kw">library</span>(rpivotTable) <span class="co"># like Excel&#39;s pivot table</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="kw">library</span>(DT) <span class="co"># awesome interactive tables</span></a>
<a class="sourceLine" id="cb1-26" title="26"></a>
<a class="sourceLine" id="cb1-27" title="27"><span class="co"># Quality Assurance</span></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="kw">library</span>(tidylog) <span class="co"># great for QA on the fly </span></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="co"># wrangling / munging / manipulating</span></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="kw">library</span>(tidyverse) <span class="co"># loads of useful packages in one </span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="kw">library</span>(glue) <span class="co"># not sure</span></a>
<a class="sourceLine" id="cb1-33" title="33"></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="co"># time series tools</span></a>
<a class="sourceLine" id="cb1-35" title="35"><span class="kw">library</span>(anytime) <span class="co"># convert text into the right date type</span></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="kw">library</span>(xts) <span class="co"># convert to time series for dygraphs</span></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="kw">library</span>(tsbox) <span class="co"># easily convert to time series</span></a>
<a class="sourceLine" id="cb1-38" title="38"></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="co"># sample data</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="kw">library</span>(mosaicData) <span class="co"># sample data</span></a>
<a class="sourceLine" id="cb1-41" title="41"></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="kw">library</span>(xfun)</a>
<a class="sourceLine" id="cb1-43" title="43"><span class="co"># https://github.com/vincentarelbundock/Rdatasets/blob/master/Rdatasets.R</span></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="co"># https://vincentarelbundock.github.io/Rdatasets/</span></a></code></pre></div>
</div>
<div id="the-data-to-visualise" class="section level2">
<h2><span class="header-section-number">2.3</span> The data to visualise</h2>
<ul>
<li><p>A lot of data visilisation shows values changing over time. For this reason, instead of using a <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/00Index.html">built in data set</a> like iris or mtcars this guide uses a built-in data set within ggplot. It is the <a href="http://vincentarelbundock.github.io/Rdatasets/doc/ggplot2/txhousing.html">txhousing</a> data set built into ggplot. It provides house sales in American cities over several years.</p></li>
<li><p>If you’re looking for a smalll well behaved data set to test your skills take a look at this <a href="https://vincentarelbundock.github.io/Rdatasets/">comprehensive list of R datasets</a>.</p></li>
<li><p>The only manipulation we will do on the txhousing data set is create a real date using <a href="https://lubridate.tidyverse.org/">lubrdate</a>. We also create a smaller data frame with a smaller number of American cities so some of the plots aren’t too crowded.</p></li>
<li><p>We’ll alo use <a href="https://github.com/elbersb/tidylog/blob/master/README.md">tidylog</a> with dplyr. It’s a simple way to do fast basic Quality Asssurance as you code. Simply replace dplyr verbs with the same verb in tidylog. This will tell you what each dplyr verb has done to your data. For example, how many rows are dropped or added by filters or joins, or what percentage of values changed after a mutate.</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># create a data frame with a real date for plotting</span></a>
<a class="sourceLine" id="cb2-2" title="2">df &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>txhousing <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">make_date</span>(<span class="dt">year =</span> year,</a>
<a class="sourceLine" id="cb2-4" title="4">                                              <span class="dt">month =</span> month, </a>
<a class="sourceLine" id="cb2-5" title="5">                                              <span class="dt">day =</span><span class="dv">1</span>)) </a></code></pre></div>
<pre><code>## mutate: changed 8,602 values (100%) of &#39;date&#39; (0 new NA)</code></pre>
<ul>
<li>Let’s also create a data frame with fewer cities. This will make plots less crowded later. Here we select only cities where the maximum number in any month is 800 or more.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># reduce the number of cities for simpler plots</span></a>
<a class="sourceLine" id="cb4-2" title="2">df_red &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">sales_max =</span> base<span class="op">::</span><span class="kw">max</span>(sales)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">filter</span>(sales_max <span class="op">&gt;=</span><span class="st"> </span><span class="dv">500</span>)</a></code></pre></div>
<pre><code>## mutate (grouped): new variable &#39;sales_max&#39; with 27 unique values and 43% NA</code></pre>
<pre><code>## filter: removed 6,171 rows (72%), 2,431 rows remaining</code></pre>
<ul>
<li>But look! Read the messages above created by tiylog. It tells us what percentage of values are NA. The mutate must have gone wrong as it tells us there are 43% NA. Well spotted tidylog. We correct it below by removing NAs from the maximum sales value.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># reduce the number of cities for simpler plots</span></a>
<a class="sourceLine" id="cb7-2" title="2">df_red &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">sales_max =</span> base<span class="op">::</span><span class="kw">max</span>(sales, </a>
<a class="sourceLine" id="cb7-5" title="5">                                        <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">filter</span>(sales_max <span class="op">&gt;=</span><span class="st"> </span><span class="dv">500</span>)</a></code></pre></div>
<pre><code>## mutate (grouped): new variable &#39;sales_max&#39; with 45 unique values and 0% NA</code></pre>
<pre><code>## filter: removed 5,984 rows (70%), 2,618 rows remaining</code></pre>
<ul>
<li><p>This has worked with 0% NA in the tidlog message above.</p></li>
<li><p>Let’s now look at the top few rows of the data frame using kableExtra table. A later chapter explores tables.</p></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">kableExtra<span class="op">::</span><span class="kw">kable</span>(utils<span class="op">::</span><span class="kw">head</span>(df))</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
city
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
month
</th>
<th style="text-align:right;">
sales
</th>
<th style="text-align:right;">
volume
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
listings
</th>
<th style="text-align:right;">
inventory
</th>
<th style="text-align:left;">
date
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
5380000
</td>
<td style="text-align:right;">
71400
</td>
<td style="text-align:right;">
701
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:left;">
2000-01-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
6505000
</td>
<td style="text-align:right;">
58700
</td>
<td style="text-align:right;">
746
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:left;">
2000-02-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
130
</td>
<td style="text-align:right;">
9285000
</td>
<td style="text-align:right;">
58100
</td>
<td style="text-align:right;">
784
</td>
<td style="text-align:right;">
6.8
</td>
<td style="text-align:left;">
2000-03-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
9730000
</td>
<td style="text-align:right;">
68600
</td>
<td style="text-align:right;">
785
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:left;">
2000-04-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
10590000
</td>
<td style="text-align:right;">
67300
</td>
<td style="text-align:right;">
794
</td>
<td style="text-align:right;">
6.8
</td>
<td style="text-align:left;">
2000-05-01
</td>
</tr>
<tr>
<td style="text-align:left;">
Abilene
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
13910000
</td>
<td style="text-align:right;">
66900
</td>
<td style="text-align:right;">
780
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:left;">
2000-06-01
</td>
</tr>
</tbody>
</table>
</div>
<div id="code-style" class="section level2">
<h2><span class="header-section-number">2.4</span> Code style</h2>
<div id="include-the-package-name-every-time.-why" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Include the package name every time. Why?</h3>
<ul>
<li><p>When I first started learning R I tried to teach myself using other people’s code. I got confused where functions came from, particularly when they mixed functions from many packages, base functions and their own functions. It made their code appear harder, more complex and cleverer than it really was.</p></li>
<li><p>Instead I use the package name before every function. Even base R functions. This can help people new to R who read your code. And you can help you future self when you come back to code you did ages ago and have forgotten what you were doing.</p></li>
<li><p>Another good reason to use the package name is being able to hit the tab key at the end of the double colon like this and see all the functions in that package.</p></li>
<li><p>Also, try highlighting a function and its package name and hit the F1 key. (You’ll see David Robinson do this a lot even on his own packages.) Also try hitting the F2 key to quickly see all the possible parameters in a function and see what the defaults are that it will use if you don’t set them to a new value.</p></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">ggplot2<span class="op">::</span></a>
<a class="sourceLine" id="cb11-2" title="2">dplyr<span class="op">::</span><span class="kw">arrange</span>()</a>
<a class="sourceLine" id="cb11-3" title="3">ggrepel<span class="op">::</span><span class="kw">geom_text_repel</span>()</a></code></pre></div>
<p><img src="package_name.gif" width="1100%" /></p>
</div>
<div id="one-line-does-one-thing---hit-the-return-key-a-lot" class="section level3">
<h3><span class="header-section-number">2.4.2</span> One line does one thing - hit the return key a lot</h3>
<ul>
<li><p>Ideally one line does one thing. Hit the return key after every pipe, comma or plus symbol in ggplot and RStudio tabs your code in the right way.</p></li>
<li><p>Also, name the parameters in each function instead of relying on theorder the function expects them. Your code is then easier to read by others and you later.</p></li>
<li><p>For example, below this works but doesn’t follow any of those rules. The code is cramped and slow to understand, edit or re-use.</p></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">ggplot</span>(df) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(date, sales, <span class="dt">colour =</span> city)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="kw">gghighlight</span>(<span class="kw">max</span>(sales) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5000</span>, <span class="dt">label_params =</span> <span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">4</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>, <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">date_format</span>(<span class="st">&quot;%d %b %y&quot;</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="kw">as.Date</span>(<span class="st">&quot;2000-01-01&quot;</span>), <span class="kw">as.Date</span>(<span class="st">&quot;2015-07-01&quot;</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;US Housing Sales over time&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;US cities with more than 5k sales in a month&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: ggplot2 package demo data&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> years, <span class="dt">linetype =</span> <span class="dv">4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(), <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>), <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">60</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">9</span>), <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>), <span class="dt">legend.position =</span> <span class="st">&quot;right&quot;</span>, <span class="dt">legend.direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">22</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">size =</span> <span class="dv">18</span>), <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span>), <span class="dt">legend.title =</span> <span class="kw">element_blank</span>())</a></code></pre></div>
<ul>
<li>In oontrast, the code below is the same code as above but it follows these 5 rules:</li>
</ul>
<ol style="list-style-type: decimal">
<li>Include package names before each function. Even for <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/00Index.html">base functions</a>.</li>
<li>Each line does one thing (e.g. a function or the value of one argument in a function).</li>
<li>Name every argument you set the value of in a function.</li>
<li>Tabbed consistently by hitting the return key after each pipe ( %&gt;% ), comma or plus symbol (+).</li>
<li>Put spaces around equals.</li>
<li>Use <a href="https://styler.r-lib.org/">styler</a> to automatically apply some of these rules.</li>
</ol>
<p>The benefits of following these rules are that you can:</p>
<ol style="list-style-type: decimal">
<li>Run your code top downwards in chunks adding more lines each time (like the popular ggplot flipbooks I describe at bullet 11 in my collection of <a href="https://github.com/billster45/r-guides-and-galleries/blob/master/README.md#learn-to-visualise-data-with-r">R guides and galleries</a></li>
<li>Comment out whole lines of code or parameters in a function to undersatnd what they are doing.</li>
<li>Easily find and edit parameaters in a function (e.g. a font size)</li>
<li>Help others QA or re-use your code more quickly.</li>
<li>Help others new to R understand what you are doing and learn R faster.</li>
<li>You are not being a “gatekeeper” of your growing R knowledge and skills. Share, explain and democratise what you know. You can then move on to more complex analysis in R with an even higher value (as proposed by Richard Susskind in <a href="https://www.amazon.co.uk/dp/0198713398/">The Future of Professions</a>).</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb13-4" title="4">    <span class="dt">x =</span> date,</a>
<a class="sourceLine" id="cb13-5" title="5">    <span class="dt">y =</span> sales,</a>
<a class="sourceLine" id="cb13-6" title="6">    <span class="dt">colour =</span> city</a>
<a class="sourceLine" id="cb13-7" title="7">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="st">  </span>gghighlight<span class="op">::</span><span class="kw">gghighlight</span>(<span class="kw">max</span>(sales) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5000</span>,</a>
<a class="sourceLine" id="cb13-11" title="11">                           <span class="dt">label_params =</span> <span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb13-12" title="12">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_date</span>(</a>
<a class="sourceLine" id="cb13-15" title="15">    <span class="dt">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>,</a>
<a class="sourceLine" id="cb13-16" title="16">    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">date_format</span>(<span class="st">&quot;%d %b %y&quot;</span>),</a>
<a class="sourceLine" id="cb13-17" title="17">    <span class="dt">limits =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb13-18" title="18">      <span class="kw">as.Date</span>(<span class="st">&quot;2000-01-01&quot;</span>),</a>
<a class="sourceLine" id="cb13-19" title="19">      <span class="kw">as.Date</span>(<span class="st">&quot;2015-07-01&quot;</span>)</a>
<a class="sourceLine" id="cb13-20" title="20">    )</a>
<a class="sourceLine" id="cb13-21" title="21">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-22" title="22"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb13-23" title="23">    <span class="dt">title =</span> <span class="st">&quot;US Housing Sales over time&quot;</span>,</a>
<a class="sourceLine" id="cb13-24" title="24">    <span class="dt">subtitle =</span> <span class="st">&quot;US cities with more than 5k sales in a month&quot;</span>,</a>
<a class="sourceLine" id="cb13-25" title="25">    <span class="dt">caption =</span> <span class="st">&quot;Source: ggplot2 package demo data&quot;</span></a>
<a class="sourceLine" id="cb13-26" title="26">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-27" title="27"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_vline</span>(</a>
<a class="sourceLine" id="cb13-28" title="28">    <span class="dt">xintercept =</span> years,</a>
<a class="sourceLine" id="cb13-29" title="29">    <span class="dt">linetype =</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb13-30" title="30">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-31" title="31"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb13-32" title="32">    <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb13-33" title="33">    <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb13-34" title="34">    <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb13-35" title="35">    <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb13-36" title="36">      <span class="dt">angle =</span> <span class="dv">60</span>,</a>
<a class="sourceLine" id="cb13-37" title="37">      <span class="dt">hjust =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb13-38" title="38">      <span class="dt">size =</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb13-39" title="39">    ),</a>
<a class="sourceLine" id="cb13-40" title="40">    <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>),</a>
<a class="sourceLine" id="cb13-41" title="41">    <span class="dt">legend.position =</span> <span class="st">&quot;right&quot;</span>,</a>
<a class="sourceLine" id="cb13-42" title="42">    <span class="dt">legend.direction =</span> <span class="st">&quot;vertical&quot;</span>,</a>
<a class="sourceLine" id="cb13-43" title="43">    <span class="dt">plot.title =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb13-44" title="44">      <span class="dt">size =</span> <span class="dv">22</span>,</a>
<a class="sourceLine" id="cb13-45" title="45">      <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span></a>
<a class="sourceLine" id="cb13-46" title="46">    ),</a>
<a class="sourceLine" id="cb13-47" title="47">    <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb13-48" title="48">      <span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>,</a>
<a class="sourceLine" id="cb13-49" title="49">      <span class="dt">size =</span> <span class="dv">18</span></a>
<a class="sourceLine" id="cb13-50" title="50">    ),</a>
<a class="sourceLine" id="cb13-51" title="51">    <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(</a>
<a class="sourceLine" id="cb13-52" title="52">      <span class="dt">hjust =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb13-53" title="53">      <span class="dt">size =</span> <span class="dv">12</span>,</a>
<a class="sourceLine" id="cb13-54" title="54">      <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span></a>
<a class="sourceLine" id="cb13-55" title="55">    ),</a>
<a class="sourceLine" id="cb13-56" title="56">    <span class="dt">legend.title =</span> <span class="kw">element_blank</span>()</a>
<a class="sourceLine" id="cb13-57" title="57">  )</a></code></pre></div>
<ul>
<li>Note this layout differs from the <a href="https://r4ds.had.co.nz/data-visualisation.html#the-layered-grammar-of-graphics">layered gramar of graphics</a> code template below…</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(</a>
<a class="sourceLine" id="cb14-3" title="3">     <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>),</a>
<a class="sourceLine" id="cb14-4" title="4">     <span class="dt">stat =</span> <span class="op">&lt;</span>STAT<span class="op">&gt;</span>, </a>
<a class="sourceLine" id="cb14-5" title="5">     <span class="dt">position =</span> <span class="op">&lt;</span>POSITION<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="st">  </span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="st">  </span><span class="er">&lt;</span>COORDINATE_FUNCTION<span class="op">&gt;</span><span class="st"> </span><span class="op">+</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="st">  </span><span class="er">&lt;</span>FACET_FUNCTION<span class="op">&gt;</span></a></code></pre></div>
<ul>
<li><p>My preference is to mentally view this as data being poured into ggplot through the pipe, then we tell it which columns to map, then the geom, followed by the same co-ordinate and facet function as Wickham reccomends.</p></li>
<li><p>This is inspired by the code lay out of the many flipbook guides I describe at bullet 11 <a href="https://github.com/billster45/r-guides-and-galleries#learn-to-visualise-data-with-r">here</a>.</p></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="op">&lt;</span>DATA<span class="op">&gt;</span><span class="st"> </span><span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="st">  </span>ggplot2<span class="op">::</span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(</a>
<a class="sourceLine" id="cb15-5" title="5">     <span class="dt">stat =</span> <span class="op">&lt;</span>STAT<span class="op">&gt;</span>, </a>
<a class="sourceLine" id="cb15-6" title="6">     <span class="dt">position =</span> <span class="op">&lt;</span>POSITION<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="st">  </span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="st">  </span><span class="er">&lt;</span>COORDINATE_FUNCTION<span class="op">&gt;</span><span class="st"> </span><span class="op">+</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="st">  </span><span class="er">&lt;</span>FACET_FUNCTION<span class="op">&gt;</span></a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-setup.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

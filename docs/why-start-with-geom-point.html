<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Why start with geom_point() ? | Rapid R Data Viz Book</title>
  <meta name="description" content="Description" />
  <meta name="generator" content="bookdown 0.15 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Why start with geom_point() ? | Rapid R Data Viz Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Why start with geom_point() ? | Rapid R Data Viz Book" />
  
  <meta name="twitter:description" content="Description" />
  

<meta name="author" content="Bill Cockerill" />


<meta name="date" content="2019-11-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exploratory-data-analysis.html"/>
<link rel="next" href="interactive-plots.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/trelliscopejs_widget-0.3.0/trelliscope.min.js"></script>
<script src="libs/trelliscopejs_widget-binding-0.2.1/trelliscopejs_widget.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.2/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.2/js/bootstrap.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/ionrangeslider-2.1.2/css/ion.rangeSlider.css" rel="stylesheet" />
<link href="libs/ionrangeslider-2.1.2/css/ion.rangeSlider.skinShiny.css" rel="stylesheet" />
<script src="libs/ionrangeslider-2.1.2/js/ion.rangeSlider.min.js"></script>
<script src="libs/strftime-0.9.2/strftime-min.js"></script>
<script src="libs/apexcharts-3.8.4/apexcharts.min.js"></script>
<script src="libs/apexcharter-binding-0.1.2/apexcharter.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.10/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.10.19/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.10.19/js/dataTables.fixedColumns.min.js"></script>
<link href="libs/dt-ext-buttons-1.10.19/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.10.19/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.flash.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.print.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/jquery-ui-1.11.4/jquery.ui.touch-punch.min.js"></script>
<link href="libs/c3-0.4.11/c3.min.css" rel="stylesheet" />
<script src="libs/c3-0.4.11/c3.min.js"></script>
<script src="libs/d3-3.5.5/d3.v3.min.js"></script>
<link href="libs/pivottable-2.19.0/pivot.min.css" rel="stylesheet" />
<script src="libs/pivottable-2.19.0/pivot.min.js"></script>
<script src="libs/pivottable-2.19.0/d3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/c3_renderers.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.cs.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.da.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.de.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.es.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.fr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.it.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.nl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pl.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.pt.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.ru.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.sq.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.tr.min.js"></script>
<script src="libs/pivottable-2.19.0/pivot.zh.min.js"></script>
<link href="libs/subtotal-1.10.0/subtotal.min.css" rel="stylesheet" />
<script src="libs/subtotal-1.10.0/subtotal.min.js"></script>
<script src="libs/polyfill-0.1/polyfill.min.js"></script>
<link href="libs/rpivotTable_style-0.1/rpivotTable.css" rel="stylesheet" />
<script src="libs/rpivotTable-binding-0.3.0/rpivotTable.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Rapid R Data Viz Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> <span>tl;dr</span></a></li>
<li class="chapter" data-level="2" data-path="why-read-this.html"><a href="why-read-this.html"><i class="fa fa-check"></i><b>2</b> Why read this?</a><ul>
<li class="chapter" data-level="2.1" data-path="why-read-this.html"><a href="why-read-this.html#good-data-analysis-starts-with-fast-intuitive-eda"><i class="fa fa-check"></i><b>2.1</b> Good data analysis starts with fast &amp; intuitive EDA</a></li>
<li class="chapter" data-level="2.2" data-path="why-read-this.html"><a href="why-read-this.html#is-this-data-science"><i class="fa fa-check"></i><b>2.2</b> Is this Data Science?</a></li>
<li class="chapter" data-level="2.3" data-path="why-read-this.html"><a href="why-read-this.html#what-about-python-for-data-viz"><i class="fa fa-check"></i><b>2.3</b> What about Python for data viz?</a></li>
<li class="chapter" data-level="2.4" data-path="why-read-this.html"><a href="why-read-this.html#what-about-point-and-click-data-vis-tools"><i class="fa fa-check"></i><b>2.4</b> What about Point and Click data vis tools?</a></li>
<li class="chapter" data-level="2.5" data-path="why-read-this.html"><a href="why-read-this.html#find-an-r-master-to-inspire-you"><i class="fa fa-check"></i><b>2.5</b> Find an R master to inspire you</a><ul>
<li class="chapter" data-level="2.5.1" data-path="why-read-this.html"><a href="why-read-this.html#david-robinson"><i class="fa fa-check"></i><b>2.5.1</b> David Robinson</a></li>
<li class="chapter" data-level="2.5.2" data-path="why-read-this.html"><a href="why-read-this.html#claus-wilke"><i class="fa fa-check"></i><b>2.5.2</b> Claus Wilke</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>3</b> Setup</a><ul>
<li class="chapter" data-level="3.1" data-path="intro.html"><a href="intro.html#navigate-r-markdown-quickly"><i class="fa fa-check"></i><b>3.1</b> Navigate R markdown quickly</a></li>
<li class="chapter" data-level="3.2" data-path="intro.html"><a href="intro.html#rstudio-shortcuts"><i class="fa fa-check"></i><b>3.2</b> Rstudio shortcuts</a></li>
<li class="chapter" data-level="3.3" data-path="intro.html"><a href="intro.html#load-r-packages-to-your-library"><i class="fa fa-check"></i><b>3.3</b> Load R packages to your library</a></li>
<li class="chapter" data-level="3.4" data-path="intro.html"><a href="intro.html#the-data-to-visualise"><i class="fa fa-check"></i><b>3.4</b> The data to visualise</a></li>
<li class="chapter" data-level="3.5" data-path="intro.html"><a href="intro.html#qa-and-unit-tests-on-the-fly"><i class="fa fa-check"></i><b>3.5</b> QA and Unit tests on the fly</a><ul>
<li class="chapter" data-level="3.5.1" data-path="intro.html"><a href="intro.html#tidylog-to-qa-dplyr-verbs"><i class="fa fa-check"></i><b>3.5.1</b> tidylog to QA dplyr verbs</a></li>
<li class="chapter" data-level="3.5.2" data-path="intro.html"><a href="intro.html#testthat-to-create-unit-tests-on-data-created"><i class="fa fa-check"></i><b>3.5.2</b> testthat to create unit tests on data created</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="intro.html"><a href="intro.html#code-style"><i class="fa fa-check"></i><b>3.6</b> Code style</a><ul>
<li class="chapter" data-level="3.6.1" data-path="intro.html"><a href="intro.html#rule-1-include-names-before-all-functions"><i class="fa fa-check"></i><b>3.6.1</b> Rule 1: Include names before all functions</a></li>
<li class="chapter" data-level="3.6.2" data-path="intro.html"><a href="intro.html#rule-2-add-argument-names-to-all-functions"><i class="fa fa-check"></i><b>3.6.2</b> Rule 2: Add argument names to all functions</a></li>
<li class="chapter" data-level="3.6.3" data-path="intro.html"><a href="intro.html#rule-3-each-line-does-one-thing"><i class="fa fa-check"></i><b>3.6.3</b> Rule 3: Each line does one thing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#start-with-dplyr-counts-and-summaries-in-console"><i class="fa fa-check"></i><b>4.1</b> Start with dplyr counts and summaries in console</a></li>
<li class="chapter" data-level="4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#plot-data-points-with-geom_point"><i class="fa fa-check"></i><b>4.2</b> Plot data points with geom_point()</a></li>
<li class="chapter" data-level="4.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#facet-by-categories"><i class="fa fa-check"></i><b>4.3</b> Facet by categories</a></li>
<li class="chapter" data-level="4.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#facet-interactively-trelliscopejs"><i class="fa fa-check"></i><b>4.4</b> Facet interactively (trelliscopejs)</a></li>
<li class="chapter" data-level="4.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#loop-to-plot-every-category-separately"><i class="fa fa-check"></i><b>4.5</b> Loop to plot every category separately</a></li>
<li class="chapter" data-level="4.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#polish-your-final-plot"><i class="fa fa-check"></i><b>4.6</b> Polish your final plot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html"><i class="fa fa-check"></i><b>5</b> Why start with geom_point() ?</a><ul>
<li class="chapter" data-level="5.1" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#ggplot-is-famed-for-annoying-errors"><i class="fa fa-check"></i><b>5.1</b> ggplot is famed for annoying errors</a></li>
<li class="chapter" data-level="5.2" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#retreat-to-geom_point"><i class="fa fa-check"></i><b>5.2</b> Retreat to geom_point()</a></li>
<li class="chapter" data-level="5.3" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#geom_jitter-and-geom_boxplot-is-better"><i class="fa fa-check"></i><b>5.3</b> geom_jitter() <strong>and</strong> geom_boxplot() is better</a></li>
<li class="chapter" data-level="5.4" data-path="why-start-with-geom-point.html"><a href="why-start-with-geom-point.html#final-choice-geom_jitter-and-stat_summary"><i class="fa fa-check"></i><b>5.4</b> Final choice: geom_jitter() <strong>and</strong> stat_summary()</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-plots.html"><a href="interactive-plots.html"><i class="fa fa-check"></i><b>6</b> Interactive plots</a><ul>
<li class="chapter" data-level="6.1" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-cheat-convert-ggplot-with-plotlyggplotly"><i class="fa fa-check"></i><b>6.1</b> Plotly cheat: convert ggplot with plotly::ggplotly()</a></li>
<li class="chapter" data-level="6.2" data-path="interactive-plots.html"><a href="interactive-plots.html#edit-ggplot-conversion-with-plotlyplotly_build"><i class="fa fa-check"></i><b>6.2</b> Edit ggplot conversion with plotly::plotly_build()</a></li>
<li class="chapter" data-level="6.3" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-basic"><i class="fa fa-check"></i><b>6.3</b> Plotly basic</a></li>
<li class="chapter" data-level="6.4" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-a-few-more-settings"><i class="fa fa-check"></i><b>6.4</b> plotly (a few more settings)</a></li>
<li class="chapter" data-level="6.5" data-path="interactive-plots.html"><a href="interactive-plots.html#plotly-bells-whistles"><i class="fa fa-check"></i><b>6.5</b> plotly (bells &amp; whistles)</a></li>
<li class="chapter" data-level="6.6" data-path="interactive-plots.html"><a href="interactive-plots.html#crosstalk"><i class="fa fa-check"></i><b>6.6</b> crosstalk</a></li>
<li class="chapter" data-level="6.7" data-path="interactive-plots.html"><a href="interactive-plots.html#apexcharter-basic"><i class="fa fa-check"></i><b>6.7</b> apexcharter basic</a></li>
<li class="chapter" data-level="6.8" data-path="interactive-plots.html"><a href="interactive-plots.html#apexcharter-bells-whistles"><i class="fa fa-check"></i><b>6.8</b> apexcharter (bells &amp; whistles)</a></li>
<li class="chapter" data-level="6.9" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-basic"><i class="fa fa-check"></i><b>6.9</b> dygraphs basic</a></li>
<li class="chapter" data-level="6.10" data-path="interactive-plots.html"><a href="interactive-plots.html#dygraphs-bells-whistles"><i class="fa fa-check"></i><b>6.10</b> dygraphs (bells &amp; whistles)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="animation.html"><a href="animation.html"><i class="fa fa-check"></i><b>7</b> Animation</a><ul>
<li class="chapter" data-level="7.1" data-path="animation.html"><a href="animation.html#ggplot-animation"><i class="fa fa-check"></i><b>7.1</b> ggplot animation</a></li>
<li class="chapter" data-level="7.2" data-path="animation.html"><a href="animation.html#plotly-animation"><i class="fa fa-check"></i><b>7.2</b> plotly animation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>8</b> Tables</a><ul>
<li class="chapter" data-level="8.1" data-path="tables.html"><a href="tables.html#datatable-basic"><i class="fa fa-check"></i><b>8.1</b> DataTable basic</a></li>
<li class="chapter" data-level="8.2" data-path="tables.html"><a href="tables.html#datatable-bells-whistles"><i class="fa fa-check"></i><b>8.2</b> DataTable (bells &amp; whistles)</a></li>
<li class="chapter" data-level="8.3" data-path="tables.html"><a href="tables.html#colour-datatable-with-formattable"><i class="fa fa-check"></i><b>8.3</b> Colour DataTable with formattable</a></li>
<li class="chapter" data-level="8.4" data-path="tables.html"><a href="tables.html#rpivottable-basic"><i class="fa fa-check"></i><b>8.4</b> rpivottable basic</a></li>
<li class="chapter" data-level="8.5" data-path="tables.html"><a href="tables.html#rpivottable-bells-whistles"><i class="fa fa-check"></i><b>8.5</b> rpivottable (bells &amp; whistles)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="colours.html"><a href="colours.html"><i class="fa fa-check"></i><b>9</b> Colours</a><ul>
<li class="chapter" data-level="9.1" data-path="colours.html"><a href="colours.html#rcolorbrewer"><i class="fa fa-check"></i><b>9.1</b> RColorBrewer</a></li>
<li class="chapter" data-level="9.2" data-path="colours.html"><a href="colours.html#prismatic"><i class="fa fa-check"></i><b>9.2</b> Prismatic</a></li>
<li class="chapter" data-level="9.3" data-path="colours.html"><a href="colours.html#hand-picked-colours"><i class="fa fa-check"></i><b>9.3</b> Hand-picked colours</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="final-document.html"><a href="final-document.html"><i class="fa fa-check"></i><b>10</b> Final document</a><ul>
<li class="chapter" data-level="10.1" data-path="final-document.html"><a href="final-document.html#picking-a-final-output-doc"><i class="fa fa-check"></i><b>10.1</b> Picking a final output doc</a></li>
<li class="chapter" data-level="10.2" data-path="final-document.html"><a href="final-document.html#flexdashboard-vs-shiny"><i class="fa fa-check"></i><b>10.2</b> flexdashboard (vs Shiny)</a></li>
<li class="chapter" data-level="10.3" data-path="final-document.html"><a href="final-document.html#r-markdown-with-floating-contents-and-tabbed-sections"><i class="fa fa-check"></i><b>10.3</b> R markdown with floating contents and tabbed sections</a></li>
<li class="chapter" data-level="10.4" data-path="final-document.html"><a href="final-document.html#bookdown"><i class="fa fa-check"></i><b>10.4</b> bookdown</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rapid R Data Viz Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="why-start-with-geom_point" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Why start with geom_point() ?</h1>
<div id="ggplot-is-famed-for-annoying-errors" class="section level2">
<h2><span class="header-section-number">5.1</span> ggplot is famed for annoying errors</h2>
<ul>
<li><p>It’s a good idea to start with <code>ggplot2::geom_point()</code> because it works for both raw and summarised data straight away. This both speeds up EDA and makes ggplot less intimidating for beginners.</p></li>
<li><p>Let’s explore more granular data to trigger some common errors using the marriage data from the mosaicData package. We do a little data cleaning on the ceremony date and on the column that describes any previous marriages.</p></li>
</ul>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1">marriage &lt;-</a>
<a class="sourceLine" id="cb63-2" title="2"><span class="st">  </span>mosaicData<span class="op">::</span>Marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-3" title="3"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">prev_marriage =</span> <span class="kw">as.character</span>(prevconc)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-4" title="4"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">prev_marriage =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb63-5" title="5">    <span class="kw">is.na</span>(prev_marriage) <span class="op">~</span><span class="st"> &quot;First Time&quot;</span>,</a>
<a class="sourceLine" id="cb63-6" title="6">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>prev_marriage</a>
<a class="sourceLine" id="cb63-7" title="7">  )) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-8" title="8"><span class="st">  </span>tidylog<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">ceremonydate1 =</span> lubridate<span class="op">::</span><span class="kw">parse_date_time</span>(ceremonydate, <span class="st">&quot;mdy&quot;</span>))</a></code></pre></div>
<pre><code>## mutate: new variable &#39;prev_marriage&#39; with 3 unique values and 49% NA</code></pre>
<pre><code>## mutate: changed 48 values (49%) of &#39;prev_marriage&#39; (48 fewer NA)</code></pre>
<pre><code>## mutate: new variable &#39;ceremonydate1&#39; with 49 unique values and 0% NA</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1">kableExtra<span class="op">::</span><span class="kw">kable</span>(utils<span class="op">::</span><span class="kw">head</span>(marriage <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb67-2" title="2"><span class="st">                                </span>dplyr<span class="op">::</span><span class="kw">select</span>(ceremonydate1, person, prev_marriage, age, race, sign)))</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
ceremonydate1
</th>
<th style="text-align:left;">
person
</th>
<th style="text-align:left;">
prev_marriage
</th>
<th style="text-align:right;">
age
</th>
<th style="text-align:left;">
race
</th>
<th style="text-align:left;">
sign
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1996-11-09
</td>
<td style="text-align:left;">
Groom
</td>
<td style="text-align:left;">
First Time
</td>
<td style="text-align:right;">
32.60274
</td>
<td style="text-align:left;">
White
</td>
<td style="text-align:left;">
Aries
</td>
</tr>
<tr>
<td style="text-align:left;">
1996-11-12
</td>
<td style="text-align:left;">
Groom
</td>
<td style="text-align:left;">
Divorce
</td>
<td style="text-align:right;">
32.29041
</td>
<td style="text-align:left;">
White
</td>
<td style="text-align:left;">
Leo
</td>
</tr>
<tr>
<td style="text-align:left;">
1996-11-27
</td>
<td style="text-align:left;">
Groom
</td>
<td style="text-align:left;">
Divorce
</td>
<td style="text-align:right;">
34.79178
</td>
<td style="text-align:left;">
Hispanic
</td>
<td style="text-align:left;">
Pisces
</td>
</tr>
<tr>
<td style="text-align:left;">
1996-12-07
</td>
<td style="text-align:left;">
Groom
</td>
<td style="text-align:left;">
Divorce
</td>
<td style="text-align:right;">
40.57808
</td>
<td style="text-align:left;">
Black
</td>
<td style="text-align:left;">
Gemini
</td>
</tr>
<tr>
<td style="text-align:left;">
1996-12-14
</td>
<td style="text-align:left;">
Groom
</td>
<td style="text-align:left;">
First Time
</td>
<td style="text-align:right;">
30.02192
</td>
<td style="text-align:left;">
White
</td>
<td style="text-align:left;">
Saggitarius
</td>
</tr>
<tr>
<td style="text-align:left;">
1996-12-26
</td>
<td style="text-align:left;">
Groom
</td>
<td style="text-align:left;">
First Time
</td>
<td style="text-align:right;">
26.86301
</td>
<td style="text-align:left;">
White
</td>
<td style="text-align:left;">
Pisces
</td>
</tr>
</tbody>
</table>
<ul>
<li><p>In the Texas housing sales data, geom_line works because we have only one value of sales per city and date used in the “aesthetics” of the plot (e.g. x,y, colour, category, or facet being the most common aesthetics).</p></li>
<li><p>A common way to trigger ggplot2 errors (or create confusing plots) is to use bar and line charts before the data is summarised. For example, a line chart is inappropriate with many ages per previous marriage status in the data.</p></li>
</ul>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb68-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb68-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb68-4" title="4">    <span class="dt">x =</span> prev_marriage,</a>
<a class="sourceLine" id="cb68-5" title="5">    <span class="dt">y =</span> age</a>
<a class="sourceLine" id="cb68-6" title="6">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-7" title="7"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/plot_error-1.png" width="672" /></p>
<ul>
<li>Changing the plot above to a bar chart instead returns a confusing error.</li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1">marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb69-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb69-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb69-4" title="4">    <span class="dt">x =</span> prev_marriage,</a>
<a class="sourceLine" id="cb69-5" title="5">    <span class="dt">y =</span> age</a>
<a class="sourceLine" id="cb69-6" title="6">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb69-7" title="7"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_bar</span>()</a></code></pre></div>
<pre><code>## Error: stat_count() must not be used with a y aesthetic.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<ul>
<li><code>ggplot2::geom_col()</code> or <code>ggplot2::geom_bar(stat = "identity")</code> will plot the data for us without and error but it’s showing the sum of all the ages in each previous marriage category which doesn’t tell us an interesting story in the data.</li>
</ul>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1">marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb71-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb71-4" title="4">    <span class="dt">x =</span> prev_marriage,</a>
<a class="sourceLine" id="cb71-5" title="5">    <span class="dt">y =</span> age</a>
<a class="sourceLine" id="cb71-6" title="6">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb71-7" title="7"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1">  <span class="co">#ggplot2::geom_col()</span></a></code></pre></div>
<ul>
<li><p>Another reason to avoid starting EDA with bars is they may perform a statistical transformation without us realising. As explained in the <a href="https://r4ds.had.co.nz/data-visualisation.html#statistical-transformations">Statistical Transformations</a> chapter of <a href="https://r4ds.had.co.nz/">R for Data Science</a>.</p></li>
<li><p>A bar or line may end up being the final plot choice, but for fast EDA let’s avoid them and retreat to our friend <code>ggplot2::geom_point()</code></p></li>
</ul>
</div>
<div id="retreat-to-geom_point" class="section level2">
<h2><span class="header-section-number">5.2</span> Retreat to geom_point()</h2>
<ul>
<li>Let’s go back to using <code>ggplot2::geom_point()</code> and facet by person.</li>
</ul>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb73-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb73-4" title="4">    <span class="dt">x =</span> prev_marriage,</a>
<a class="sourceLine" id="cb73-5" title="5">    <span class="dt">y =</span> age</a>
<a class="sourceLine" id="cb73-6" title="6">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb73-7" title="7"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">facet_wrap</span>(<span class="op">~</span>person) <span class="op">+</span></a>
<a class="sourceLine" id="cb73-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.3</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<ul>
<li><p>Immediately this is the start of an interesting story we can follow. We see the ages of brides and grooms shown by whether they are getting married for the first time or if they have been divorced or widowed.</p></li>
<li><p>As well as data points we might also experiment with different ways of showing these distributions. Hadley Wickham’s <a href="https://ggplot2-book.org/">ggplot2: Elegant Graphics for Data Analysis</a> has a good short chapter on <a href="https://ggplot2-book.org/statistical-summaries.html#distributions">displaying distributions</a>.</p></li>
<li><p>First let’s try a histogram and see if this helps us tell a good story.</p></li>
</ul>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb74-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(<span class="dt">x =</span> age) <span class="op">+</span></a>
<a class="sourceLine" id="cb74-4" title="4"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>person <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-5" title="5"><span class="st">                        </span>prev_marriage) <span class="op">+</span></a>
<a class="sourceLine" id="cb74-6" title="6"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_histogram</span>()</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="bookdown-demo_files/figure-html/plot_error_fix-1.png" width="672" /></p>
<ul>
<li>We get a warning about the bin width. We can set the bin width by hand, say 6 bins.</li>
</ul>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1">marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb76-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb76-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(<span class="dt">x =</span> age) <span class="op">+</span></a>
<a class="sourceLine" id="cb76-4" title="4"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>person <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb76-5" title="5"><span class="st">                        </span>prev_marriage) <span class="op">+</span></a>
<a class="sourceLine" id="cb76-6" title="6"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="st">&quot;6&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<ul>
<li><p>This looks better but is there an optimum bin number? There is probably no optimum width, as discussed in this <a href="https://stats.stackexchange.com/questions/798/calculating-optimal-number-of-bins-in-a-histogram">stackexchange</a> question.</p></li>
<li><p>Let’s also try a density distribution plot using <code>ggplot2::geom_density()</code></p></li>
</ul>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">p &lt;-</a>
<a class="sourceLine" id="cb77-2" title="2"><span class="st">  </span>marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb77-4" title="4"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb77-5" title="5">    <span class="dt">x =</span> age,</a>
<a class="sourceLine" id="cb77-6" title="6">    <span class="dt">fill =</span> prev_marriage</a>
<a class="sourceLine" id="cb77-7" title="7">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb77-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb77-9" title="9">                        <span class="dt">alpha =</span> <span class="fl">0.5</span>, </a>
<a class="sourceLine" id="cb77-10" title="10">                        <span class="dt">colour =</span> <span class="ot">NA</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb77-11" title="11"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(person), </a>
<a class="sourceLine" id="cb77-12" title="12">                      <span class="dt">ncol =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb77-13" title="13"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>()</a>
<a class="sourceLine" id="cb77-14" title="14"></a>
<a class="sourceLine" id="cb77-15" title="15">directlabels<span class="op">::</span><span class="kw">direct.label</span>(p, <span class="kw">list</span>(<span class="st">&quot;top.points&quot;</span>, <span class="dt">cex =</span> <span class="fl">.75</span>, <span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">vjust =</span> <span class="fl">-0.2</span>))</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/plot_error_fix2-1.png" width="672" /></p>
</div>
<div id="geom_jitter-and-geom_boxplot-is-better" class="section level2">
<h2><span class="header-section-number">5.3</span> geom_jitter() <strong>and</strong> geom_boxplot() is better</h2>
<ul>
<li>But with so few data points I think that <code>ggplot2::box_plot()</code> with the data points overlaid using <code>ggplot2::geom_jitter()</code> tells the data story well.</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" title="1">marriage <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb78-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb78-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb78-4" title="4">    <span class="dt">x =</span> prev_marriage,</a>
<a class="sourceLine" id="cb78-5" title="5">    <span class="dt">y =</span> age</a>
<a class="sourceLine" id="cb78-6" title="6">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb78-7" title="7"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">facet_wrap</span>(<span class="op">~</span>person) <span class="op">+</span></a>
<a class="sourceLine" id="cb78-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_boxplot</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb78-9" title="9"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.1</span>,</a>
<a class="sourceLine" id="cb78-10" title="10">                       <span class="dt">alpha =</span> <span class="fl">0.3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb78-11" title="11"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_light</span>()</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
<div id="final-choice-geom_jitter-and-stat_summary" class="section level2">
<h2><span class="header-section-number">5.4</span> Final choice: geom_jitter() <strong>and</strong> stat_summary()</h2>
<ul>
<li><p>The plot above would have been my final choice until I saw the fantastic <a href="https://cedricscherer.netlify.com/2019/05/17/the-evolution-of-a-ggplot-ep.-1/">“evolution of a ggplot”</a> post by Cedric Sherer.</p></li>
<li><p>In the gif below you can see Sherer also starts with a boxplot, but his final choice is <code>ggplot2::geom_jitter()</code> and <code>ggplot2::stat_summary()</code>. His post gives the full code in a gradual code story presented like the ggplot flip-books.</p></li>
</ul>
<p><img src="https://d33wubrfki0l68.cloudfront.net/1e7033393a2c70dc1255c5d0f1c563e945519251/61035/img/evol-ggplot/evol-ggplot-1.gif" width="100%" /></p>
<ul>
<li>And here is his final plot shown at the end of the looping gif above.</li>
</ul>
<p><img src="https://d33wubrfki0l68.cloudfront.net/ca54e2775766e840243d03d86f0bdc1b7aa2291a/93cec/post/2019-05-17_evol-ggplot-1_files/figure-html/plot-with.map-1.png" width="100%" /></p>
<ul>
<li>Inspired by that plot and its code I prefer my final plot below on the marriage data. It is more engaging than a boxplot as it tells the story with little or no explanation needed, more like a plot in a quality online newspaper can.</li>
</ul>
<p><img src="marriage.svg" /><!-- --></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1">p &lt;-<span class="st"> </span>marriage <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(person,prev_marriage) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">pers_prev_avg =</span> <span class="kw">median</span>(age)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(person) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-6" title="6"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">pers_avg =</span> <span class="kw">median</span>(age)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-7" title="7"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb79-9" title="9"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb79-10" title="10">    <span class="dt">x =</span> prev_marriage,</a>
<a class="sourceLine" id="cb79-11" title="11">    <span class="dt">y =</span> age,</a>
<a class="sourceLine" id="cb79-12" title="12">    <span class="dt">colour =</span> prev_marriage</a>
<a class="sourceLine" id="cb79-13" title="13">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-14" title="14"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">facet_wrap</span>(<span class="op">~</span>person, <span class="dt">ncol =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-15" title="15"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">stat_summary</span>(<span class="dt">fun.y =</span> median, </a>
<a class="sourceLine" id="cb79-16" title="16">                        <span class="dt">geom =</span> <span class="st">&quot;point&quot;</span>, </a>
<a class="sourceLine" id="cb79-17" title="17">                        <span class="dt">size =</span> <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb79-18" title="18">                        <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-19" title="19"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">stat_summary</span>(<span class="kw">aes</span>(<span class="dt">label=</span> <span class="kw">paste</span>( <span class="kw">round</span>(..y..,<span class="dv">1</span>), </a>
<a class="sourceLine" id="cb79-20" title="20">                                          <span class="st">&quot; years&quot;</span>)),</a>
<a class="sourceLine" id="cb79-21" title="21">                        <span class="dt">fun.y=</span>median, </a>
<a class="sourceLine" id="cb79-22" title="22">                        <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb79-23" title="23">                        <span class="dt">geom=</span><span class="st">&quot;text&quot;</span>, </a>
<a class="sourceLine" id="cb79-24" title="24">                        <span class="dt">size=</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb79-25" title="25">                        <span class="dt">vjust =</span> <span class="fl">-1.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-26" title="26"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_hline</span>(<span class="kw">aes</span>(<span class="dt">yintercept =</span> pers_avg), </a>
<a class="sourceLine" id="cb79-27" title="27">                     <span class="dt">color =</span> <span class="st">&quot;gray70&quot;</span>, </a>
<a class="sourceLine" id="cb79-28" title="28">                     <span class="dt">size =</span> <span class="fl">0.6</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-29" title="29"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="fl">0.7</span>,</a>
<a class="sourceLine" id="cb79-30" title="30">                         <span class="dt">y =</span> pers_avg,</a>
<a class="sourceLine" id="cb79-31" title="31">                         <span class="dt">label =</span> <span class="kw">paste</span>(person,<span class="st">&quot; average age&quot;</span>, <span class="kw">round</span>(pers_avg,<span class="dv">0</span>)), </a>
<a class="sourceLine" id="cb79-32" title="32">                         <span class="co">#colour = &quot;white&quot;,</span></a>
<a class="sourceLine" id="cb79-33" title="33">                         <span class="dt">hjust =</span> <span class="fl">1.05</span>),</a>
<a class="sourceLine" id="cb79-34" title="34">                     <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb79-35" title="35">                     <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-36" title="36"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">x =</span> prev_marriage, </a>
<a class="sourceLine" id="cb79-37" title="37">                   <span class="dt">xend =</span> prev_marriage,</a>
<a class="sourceLine" id="cb79-38" title="38">                   <span class="dt">y =</span> pers_avg, </a>
<a class="sourceLine" id="cb79-39" title="39">                   <span class="dt">yend =</span> pers_prev_avg),</a>
<a class="sourceLine" id="cb79-40" title="40">               <span class="dt">size =</span> <span class="fl">0.8</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-41" title="41"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_jitter</span>(<span class="dt">size =</span> <span class="dv">2</span>, </a>
<a class="sourceLine" id="cb79-42" title="42">                       <span class="dt">alpha =</span> <span class="fl">0.4</span>, </a>
<a class="sourceLine" id="cb79-43" title="43">                       <span class="dt">width =</span> <span class="fl">0.2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-44" title="44"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_color_brewer</span>(<span class="dt">type =</span> <span class="st">&quot;qual&quot;</span>,</a>
<a class="sourceLine" id="cb79-45" title="45">                              <span class="dt">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-46" title="46"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb79-47" title="47"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb79-48" title="48">                 <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>, </a>
<a class="sourceLine" id="cb79-49" title="49">                                           <span class="dt">hjust =</span> <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb79-50" title="50">                 <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>,</a>
<a class="sourceLine" id="cb79-51" title="51">                 <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb79-52" title="52">                 <span class="dt">axis.title.y =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb79-53" title="53">                 <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb79-54" title="54">                 <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>,</a>
<a class="sourceLine" id="cb79-55" title="55">                                             <span class="dt">hjust =</span> <span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb79-56" title="56">                 <span class="dt">panel.border =</span> <span class="kw">element_rect</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, </a>
<a class="sourceLine" id="cb79-57" title="57">                                             <span class="dt">fill=</span><span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb79-58" title="58">                                             <span class="dt">size =</span> <span class="fl">0.1</span>)</a>
<a class="sourceLine" id="cb79-59" title="59">                 ) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-60" title="60"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks=</span>base<span class="op">::</span><span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">10</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb79-61" title="61"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb79-62" title="62"><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb79-63" title="63">    <span class="dt">title =</span> <span class="st">&quot;Age* of brides and grooms by previous marriage status&quot;</span>,</a>
<a class="sourceLine" id="cb79-64" title="64">    <span class="dt">caption =</span> <span class="st">&quot;*The average ages are the median, the middle age among all ages.</span><span class="ch">\n</span><span class="st"> i.e. 50% of ages fall below the median value and 50% above it&quot;</span></a>
<a class="sourceLine" id="cb79-65" title="65">  ) </a>
<a class="sourceLine" id="cb79-66" title="66"></a>
<a class="sourceLine" id="cb79-67" title="67">ggplot2<span class="op">::</span><span class="kw">ggsave</span>(<span class="dt">file=</span><span class="st">&quot;marriage.svg&quot;</span>, </a>
<a class="sourceLine" id="cb79-68" title="68">                <span class="dt">device =</span> <span class="st">&quot;svg&quot;</span>,</a>
<a class="sourceLine" id="cb79-69" title="69">                <span class="dt">plot=</span>p)</a></code></pre></div>
<pre><code>## Saving 7 x 5 in image</code></pre>
<ul>
<li><p>In the plot above we can see grooms are older on average overall. But do they tend to be older or younger than their bride within each marriage?</p></li>
<li><p>As a final quick exploratory chart let’s put the ceremony ID on the x-axis, use <code>ggplot2::geom_point()</code> for age, and give the data points for brides and grooms their own colour. Adding the ceremony ID <code>bookpageID</code> to the group aesthetic means that when we add <code>ggplot2::geom_line()</code> this creates a line that joins the two data points for each marriage.</p></li>
<li><p>We can see that most grooms are older than most brides in each ceremony.</p></li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1">marriage <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb81-2" title="2"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb81-3" title="3"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">aes</span>(<span class="dt">x =</span> bookpageID, </a>
<a class="sourceLine" id="cb81-4" title="4">               <span class="dt">y =</span> age, </a>
<a class="sourceLine" id="cb81-5" title="5">               <span class="dt">colour =</span> person, </a>
<a class="sourceLine" id="cb81-6" title="6">               <span class="dt">group =</span> bookpageID) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb81-7" title="7"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb81-8" title="8"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb81-9" title="9"><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploratory-data-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interactive-plots.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-why_geom_point.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
